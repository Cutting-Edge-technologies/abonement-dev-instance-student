"use strict";(self.webpackChunkabonement_front=self.webpackChunkabonement_front||[]).push([[365],{4526:(e,t,n)=>{n.r(t),n.d(t,{default:()=>as});var i={};n.r(i),n.d(i,{alreadyAuthenticatedUser:()=>p,authenticateFacebook:()=>x,authenticateWithFirebase:()=>j});var o={};n.r(o),n.d(o,{cancelModifyRule:()=>kt,cancelModifySubject:()=>St,closeAbonementModal:()=>Ct,closeLessonAddParticipiantModal:()=>Nt,lessonAcceptedView:()=>zt,lessonDiclainedView:()=>Et,lessonPendingView:()=>Lt,navigateSchedule:()=>xt,navigateSubjectList:()=>bt,openLessonAddParticipiantModal:()=>Tt,setTecherCalendarRepresentationType:()=>jt,startCreatingAbonements:()=>vt,startCreatingRule:()=>It,startCreatingSubject:()=>wt,subcectListViewSubjects:()=>Mt,subjectListViewAbonements:()=>At,subjectShowMore:()=>Zt,teacherShowMore:()=>Rt,toggleRuleModalMode:()=>Dt});var s={};n.r(s),n.d(s,{confirmSavingAbonementOffer:()=>Ot,confirmSavingRule:()=>Kt,confirmSavingSubject:()=>Yt,startDeletingAbonement:()=>Pt,startDeletingRule:()=>Vt,startDeletingSubject:()=>Ht,startEditingAbonementOffer:()=>Wt,startEditingRule:()=>Ut,startEditingSubject:()=>Bt,startTeacherApp:()=>Ft});var c={};n.r(c),n.d(c,{changeAbonementLimitLessons:()=>on,changeAbonementLimitTime:()=>mn,changeAbonementPrice:()=>sn,changeAbonementSubjects:()=>hn,changeAbonementType:()=>nn,changeRuleDuration:()=>dn,changeRuleMonthDay:()=>un,changeRulePeriodicityType:()=>an,changeRuleStartTime:()=>ln,changeSubjectDescription:()=>cn,changeSubjectName:()=>Qt,changeTeacherDescription:()=>en,changeTeacherName:()=>Xt,confirmChangeSubjectDescription:()=>yn,confirmChangeSubjectName:()=>_t,confirmChangeTeacherDescription:()=>tn,confirmChangeTeacherName:()=>qt,deleteAbonementSubject:()=>gn,startChangeSubjectDescription:()=>fn,startChangeSubjectName:()=>$t,startChangeTeacherDescription:()=>Jt,startChangeTeacherName:()=>Gt,toggleRuleWeekDay:()=>rn});var a={};n.r(a),n.d(a,{addStudentToLesson:()=>Rn,cancelLesson:()=>Cn,changeAddParticipantSearch:()=>kn,finalizeLesson:()=>Zn,navigateLesson:()=>wn,onChengeDateBackward:()=>Tn,onChengeDateForward:()=>En,onToday:()=>Ln,removeStudentFromLesson:()=>vn,requestStatusChange:()=>Dn,searchParticipantToAdd:()=>zn,sendAnotherNotification:()=>In});var r=n(9434),l=n(7593),d=n(2791),u=n(3309),h=n(7780),g=n(3608),f=n(2731);const y=function(e){let{id:t,displayName:n,photoURL:i}=e;return function*(){if(t){const e=yield(0,h.RE)(g.IM.teacherAPIHandeler.single,t);if(!(e&&e.name&&e.avatar&&e.abonementOffers)){const e={id:t,name:n||"",description:"",avatar:i||"",subjects:[],abonementOffers:[]};yield(0,h.RE)(g.IM.teacherAPIHandeler.update,e)}}}()};var m=n(126);const{alreadyAuthenticatedUser:p,authenticateWithFirebase:j,authenticateFacebook:x}=(0,m.A)((function*(e){const t=(0,f.d)(e.providerData[0]);yield(0,h.RE)(y,t)}),y);var b=n(305),M=n(3655),A=n(7781),S=n(7165);const w={id:"",name:"Harry Potter",avatar:"",description:"",subjects:[],abonementOffers:[]},v=(0,S.oM)({name:"teacherDomainView",initialState:w,reducers:{setDomainView:(e,t)=>{let{payload:n}=t;return{...n}},resetDomainView:()=>({...w})}});var C=n(2312),Z=n(947);const R=(0,Z.gH)({id:"",name:"",description:"",rules:[],teacherId:""},"externalSubjects"),I=(0,Z.gH)({id:"",date:new Date,durationMin:0,accepted:[],status:C.UN.scheduled,declained:[],subject:{id:"",name:"",description:"",rules:[],teacherId:""},teacherId:"",participants:[]},"externalLessons"),D=(0,Z.gH)({id:"",name:"",avatar:""},"externalUsers"),k=(0,Z.gH)({id:"",name:"",description:"",avatar:"",abonementOffers:[],subjects:[]},"externalTeachers");var z=n(1816);const L=(0,z.N)({id:"",name:"",abonementOffers:[],subjects:[],description:"",avatar:""},"editingTeacher"),E=(0,z.N)({id:"",name:"",description:"",rules:[],teacherId:""},"editingSubject"),T=(0,z.N)({id:"",type:C.DK.limited,subjects:[],limitTime:0,limitLessons:0,price:0,teacherId:""},"editingAbonementOffer"),N=(0,z.N)({id:"",timeStart:new Date,durationMin:0,periodicity:{periodicityType:C.wy.weekly,periodicityRule:[]},teacherId:"",subjectId:""},"editableRule");var F=n(2444);const H={id:"",date:new Date,participants:[],durationMin:0,status:C.UN.scheduled,accepted:[],declained:[],subject:{id:"",name:"",description:"",rules:[],teacherId:""},teacherId:""},P=(0,S.oM)({name:"lesson",initialState:H,reducers:{setLessonState:(e,t)=>{let{payload:n}=t;return{...e,...n}},resetLessonState:()=>({...H})}});var V=n(9438);const O=(0,A.UY)({loading:M.mO.reducer,error:M.kD.reducer,teacherDomain:v.reducer,externalLessons:I.reducer,externalSubjects:R.reducer,externalTeachers:k.reducer,externalUsers:D.reducer,editableAbonementOffer:T.reducer,editableRule:N.reducer,editableSubject:E.reducer,editableTeacher:L.reducer,modal:F.MK.reducer,lesson:P.reducer,userProfile:V.B.reducer}),Y=e=>e.externalLessons,K=e=>Y(e).data,B=e=>e.lesson,W=e=>B(e).status,U=e=>e.externalUsers,$=e=>U(e).data,Q=e=>U(e).filters,_=e=>Q(e).search||"",G=e=>B(e).id,X=e=>{const{participants:t,accepted:n}=B(e),i=new Set(n);return t.filter((e=>i.has(e.id)))},q=e=>{const{participants:t,declained:n}=B(e),i=new Set(n);return t.filter((e=>i.has(e.id)))},J=e=>{const{participants:t,accepted:n,declained:i}=B(e),o=new Set([...n,...i]);return t.filter((e=>!o.has(e.id)))},ee=e=>{const t=W(e);return t===C.UN.inProcess||t===C.UN.finished},te=e=>{const t=W(e);return t===C.UN.inProcess||t===C.UN.finished||t===C.UN.commingSoon},ne=e=>e.teacherDomain,ie=e=>ne(e).subjects,oe=e=>ne(e).abonementOffers,se=e=>t=>ie(t).find((t=>t.id===e)),ce=e=>ie(e).length,ae=e=>oe(e).length,re=e=>{const t=new Map,n=oe(e),i=ie(e);return n.forEach((e=>{const n=i.filter((t=>e.subjects.includes(t.id))).map((e=>e.name)).join(", ");t.set(e.id,n)})),t},le=e=>ie(e).map((e=>({id:e.id,title:e.name}))),de=e=>{const t=ne(e),{abonementOffers:n,subjects:i,...o}=t;return{...o,abonementOffers:he(e),subjects:ue(e)}},ue=e=>ie(e).map((e=>e.id)),he=e=>oe(e).map((e=>e.id));var ge=n(9078);const fe=e=>(e=>e.editableAbonementOffer)(e).data,ye=e=>fe(e).limitLessons,me=e=>fe(e).price,pe=e=>fe(e).type,je=e=>fe(e).subjects,xe=e=>fe(e).limitTime,be=e=>(e=>e.editableRule)(e).data,Me=e=>be(e).durationMin,Ae=e=>be(e).periodicity.periodicityType,Se=e=>be(e).timeStart,we=e=>be(e).periodicity.periodicityRule,ve=e=>e.editableSubject,Ce=e=>ve(e).data,Ze=e=>t=>(e=>ve(e).fieldsEditing)(t)[e],Re=Ze("name"),Ie=Ze("description"),De=e=>Ce(e).name,ke=e=>Ce(e).description,ze=e=>e.editableTeacher,Le=e=>ze(e).data,Ee=e=>t=>(e=>ze(e).fieldsEditing)(t)[e],Te=Ee("name"),Ne=Ee("description"),Fe=e=>Le(e).name,He=e=>Le(e).description,Pe=e=>Ce(e).id,Ve=e=>Ce(e).rules,Oe=e=>{const t=Pe(e);return K(e).filter((e=>e.subject.id===t))},Ye=e=>{const t=(0,b.VI)(e),n=(e=>{const t=ie(e),n=Pe(e);return t.filter((e=>e.id!==n))})(e);return(0,ge.t)(n,C.He.outerSchedule,t)},Ke=e=>{const t=Ve(e),n=(e=>be(e).id)(e);return t.filter((e=>e.id!==n))},Be=e=>{const t=(0,b.VI)(e),n=(e=>({...Ce(e),rules:Ke(e)}))(e);return(0,ge.oO)(n,C.He.thisSubjectSchedule,t)},We=e=>{const t=(0,b.VI)(e),n=Ce(e),i=be(e);return(0,ge.Xt)(n,i,C.He.editingRuleSchedule,t)},Ue=e=>[...Ye(e),...Be(e),...We(e)],$e=e=>{const t=Ye(e),n=Be(e),i=We(e),o=[...t,...n];return(0,ge.Kj)(i,o)},Qe=e=>({...Ce(e),rules:_e(e)}),_e=e=>{var t;return(null===(t=Ce(e).rules)||void 0===t?void 0:t.map((e=>e.id)))||[]};var Ge=n(5531);function*Xe(e){yield function*(e){const t=yield(0,h.Ys)((e=>t=>{const n=se(e)(t),i=null===n||void 0===n?void 0:n.rules;return null===i||void 0===i?void 0:i.map((e=>e.id))})(e));for(const n of t)yield(0,h.RE)(tt,n)}(e),yield(0,h.RE)(g.IM.subjectApiHandeler.delete,e)}function*qe(e){const t=yield(0,h.Ys)(de),n=[...t.subjects,e],i={...t,subjects:n};yield(0,h.RE)(g.IM.teacherAPIHandeler.update,i)}function*Je(){const e=yield(0,h.Ys)(Ge.b1),t=yield(0,h.Ys)(fe),n={...t,teacherId:e},{id:i,...o}=n;if(!i){const e=yield(0,h.RE)(g.IM.abonementOffer.create,o);yield function*(e){const t=yield(0,h.Ys)(de),n=[...t.abonementOffers,e],i={...t,abonementOffers:n};yield(0,h.RE)(g.IM.teacherAPIHandeler.update,i)}(e)}else yield(0,h.RE)(g.IM.abonementOffer.update,t)}function*et(e){const{id:t,...n}=e;if(!t){const e=yield(0,h.RE)(g.IM.rulesApiHandeler.create,n);yield function*(e){var t;const n=yield(0,h.Ys)(Ce),i=[...(null===(t=n.rules)||void 0===t?void 0:t.map((e=>e.id)))||[],e],o={...n,rules:i};yield(0,h.RE)(g.IM.subjectApiHandeler.update,o)}(e)}else yield(0,h.RE)(g.IM.rulesApiHandeler.update,e)}function*tt(e){yield(0,h.RE)(g.IM.rulesApiHandeler.delete,e)}const nt=function*(){const e=yield function*(){const e=yield(0,h.Ys)(Ge.b1);if(e)try{return{...yield(0,h.RE)(g.bH,e),id:e}}catch(t){console.log(t)}else console.warn("User is not authenticated")}();yield(0,h.gz)(v.actions.setDomainView(e)),yield(0,h.gz)(L.actions.setEditingResource(e))},it=function*(){yield(0,h.gz)(T.actions.reset())},ot=function*(){yield(0,h.gz)(N.actions.reset())},st=function*(){yield(0,h.gz)(E.actions.reset())},ct=function*(){yield(0,h.gz)(F.MK.actions.resetModalState())},at=function*(){const e=yield(0,h.Ys)(Pe),t=yield(0,h.Ys)(se(e));yield(0,h.gz)(E.actions.setEditingResource(t))};function*rt(){yield(0,h.gz)(F.MK.actions.setModalState({isAbonementModalOpen:!1}))}function*lt(){yield(0,h.gz)(F.MK.actions.setModalState({isNewRuleModalOpen:!1}))}function*dt(){yield(0,h.gz)(F.MK.actions.setModalState({teacherView:F.xF.subjectList}))}const ut=async e=>await g.IM.userAPIHandeler.list("",e),ht=async(e,t)=>{const n=await g.IM.lessonAPIHandeler.list(e,t);return gt(n)},gt=e=>e.map((e=>({...e,date:e.date.toDate()})));var ft=n(6753),yt=n(9040);function*mt(){const e=yield(0,h.Ys)(b.VI),t=(0,ft.Z)(e,7),n=(0,yt.Z)(e,7);yield(0,h.gz)(I.actions.setFilters({startDate:t,endDate:n}))}var pt=n(9901);const jt=(0,M.fA)("setTecherCalendarRepresentationTypeCalendarWeek",(function(e){let{payload:t}=e;return function*(){yield(0,h.gz)(F.MK.actions.setModalState({techerCalendarRepresentationType:t}))}()})),xt=(0,M.fA)("navigateSchedule",(function*(){yield ct(),yield(0,h.gz)(F.MK.actions.setModalState({teacherView:F.xF.schedule}))})),bt=(0,M.fA)("navigateSubjectList",(function*(){yield ct(),yield(0,h.gz)(F.MK.actions.setModalState({teacherView:F.xF.subjectList}))})),Mt=(0,M.fA)("subcectListViewSubjects",(function*(){yield(0,h.gz)(F.MK.actions.setModalState({subjectListView:F.MB.subjects}))})),At=(0,M.fA)("subjectListViewAbonements",(function*(){yield(0,h.gz)(F.MK.actions.setModalState({subjectListView:F.MB.abonements}))})),St=(0,M.fA)("cancelModifySubject",(function*(){yield ct(),yield dt(),yield st()})),wt=(0,M.fA)("startCreatingSubject",(function*(){yield(0,h.gz)(jt.action(F.QW.calendarWeek)),yield(0,h.gz)(F.MK.actions.setModalState({teacherView:F.xF.subjectPage}))})),vt=(0,M.fA)("startCreatingAbonements",(function*(){yield(0,h.gz)(F.MK.actions.setModalState({isAbonementModalOpen:!0}))})),Ct=(0,M.fA)("closeAbonementModal",(function*(){yield rt(),yield it()})),Zt=(0,M.fA)("subjectShowMore",(function*(){const e=yield(0,h.Ys)(b.iX);yield(0,h.gz)(F.MK.actions.setModalState({subjectDescriptionShowMore:!e}))})),Rt=(0,M.fA)("teacherShowMore",(function*(){const e=yield(0,h.Ys)(b.KD);yield(0,h.gz)(F.MK.actions.setModalState({teacherDescriptionShowMore:!e}))})),It=(0,M.fA)("startCreatingRule",(function*(){yield(0,h.gz)(F.MK.actions.setModalState({isNewRuleModalOpen:!0}))})),Dt=(0,M.fA)("toggleRuleModalMode",(function*(){(yield(0,h.Ys)(b.Uz))===pt.g.halfHeight?yield(0,h.gz)(F.MK.actions.setModalState({ruleModalMode:pt.g.fillHeight})):yield(0,h.gz)(F.MK.actions.setModalState({ruleModalMode:pt.g.halfHeight}))})),kt=(0,M.fA)("cancelModifyRule",(function*(){yield lt(),yield ot()})),zt=(0,M.fA)("lessonAcceptedView",(function*(){yield(0,h.gz)(F.MK.actions.setModalState({lessonView:F.NZ.accepted}))})),Lt=(0,M.fA)("lessonPendingView",(function*(){yield(0,h.gz)(F.MK.actions.setModalState({lessonView:F.NZ.pending}))})),Et=(0,M.fA)("lessonDiclainedView",(function*(){yield(0,h.gz)(F.MK.actions.setModalState({lessonView:F.NZ.declained}))})),Tt=(0,M.fA)("openLessonAddParticipiantModal",(function*(){yield(0,h.gz)(F.MK.actions.setModalState({isLessonAddParticipantModalOpen:!0}))})),Nt=(0,M.fA)("closeLessonAddParticipiantModal",(function*(){yield(0,h.gz)(F.MK.actions.setModalState({isLessonAddParticipantModalOpen:!1}))})),Ft=(0,M.fA)("startTeacherApp",(function*(){yield nt(),yield mt(),yield function*(){const e=yield(0,h.Ys)(Ge.b1),t=yield(0,h.Ys)(Q),n=yield(0,h.RE)(ht,e,t);yield(0,h.gz)(I.actions.setResourses(n))}()})),Ht=(0,M.fA)("startDeletingSubject",(function(e){let{payload:t}=e;return function*(){yield Xe(t),yield nt()}()})),Pt=(0,M.fA)("startDeletingAbonement",(function(e){let{payload:t}=e;return function*(){yield function*(e){yield(0,h.RE)(g.IM.abonementOffer.delete,e)}(t),yield nt()}()})),Vt=(0,M.fA)("startDeletingRule",(function(e){let{payload:t}=e;return function*(){yield tt(t),yield nt(),yield at(),yield lt(),yield ot()}()})),Ot=(0,M.fA)("confirmSavingAbonement",(function*(){yield Je(),yield nt(),yield rt(),yield it()})),Yt=(0,M.fA)("confirmSavingSubject",(function*(){yield function*(){const e=yield(0,h.Ys)(Ge.b1),t={...yield(0,h.Ys)(Qe),teacherId:e},{id:n,...i}=t;if(n)yield(0,h.RE)(g.IM.subjectApiHandeler.update,t);else{const e=yield(0,h.RE)(g.IM.subjectApiHandeler.create,i);yield qe(e)}}(),yield nt(),yield ct(),yield dt(),yield st()})),Kt=(0,M.fA)("confirmSavingRule",(function*(){yield function*(){const e=yield(0,h.Ys)(Pe),t=yield(0,h.Ys)(Ge.b1),n=yield(0,h.Ys)(be);if(e){const i={...n,subjectId:e,teacherId:t};yield(0,h.RE)(et,i)}else{const e={...yield(0,h.Ys)(Qe),teacherId:t},{id:i,...o}=e,s=yield(0,h.RE)(g.IM.subjectApiHandeler.create,o);yield qe(s),yield(0,h.gz)(E.actions.setEditingResource({id:s,teacherId:t}));const c={...n,subjectId:s,teacherId:t};yield(0,h.RE)(et,c)}}(),yield nt(),yield at(),yield lt(),yield ot()})),Bt=(0,M.fA)("startEditingSubject",(function(e){let{payload:t}=e;return function*(){const e=yield(0,h.Ys)(se(t));yield(0,h.gz)(E.actions.setEditingResource(e)),yield(0,h.gz)(jt.action(F.QW.calendarWeek)),yield(0,h.gz)(F.MK.actions.setModalState({teacherView:F.xF.subjectPage}))}()})),Wt=(0,M.fA)("startEditingAbonementOffer",(function(e){let{payload:t}=e;return function*(){const e=yield(0,h.Ys)((n=t,e=>oe(e).find((e=>e.id===n))));var n;yield(0,h.gz)(T.actions.setEditingResource(e)),yield(0,h.gz)(F.MK.actions.setModalState({isAbonementModalOpen:!0}))}()})),Ut=(0,M.fA)("startEditingRule",(function(e){let{payload:t}=e;return function*(){const e=yield(0,h.Ys)(Pe),n=(yield(0,h.Ys)(se(e))).rules.find((e=>e.id===t));n&&(yield(0,h.gz)(N.actions.setEditingResource(n)),yield(0,h.gz)(F.MK.actions.setModalState({isNewRuleModalOpen:!0})))}()})),$t=(0,M.fA)("startChangeSubjectName",(function*(){yield(0,h.gz)(E.actions.startEditingField("name"))})),Qt=(0,M.fA)("changeSubjectName",(function(e){let{payload:t}=e;return function*(){yield(0,h.gz)(E.actions.setEditingResource({name:t}))}()})),_t=(0,M.fA)("confirmChangeSubjectName",(function*(){yield(0,h.gz)(E.actions.finishEditingField("name"))})),Gt=(0,M.fA)("startChangeTeacherName",(function*(){yield(0,h.gz)(L.actions.startEditingField("name"))})),Xt=(0,M.fA)("changeTeacherName",(function(e){let{payload:t}=e;return function*(){yield(0,h.gz)(L.actions.setEditingResource({name:t}))}()})),qt=(0,M.fA)("confirmChangeTeacherName",(function*(){(yield(0,h.Ys)(Te))&&(yield(0,h.gz)(L.actions.finishEditingField("name")),yield function*(){const e=yield(0,h.Ys)(Fe),t={...yield(0,h.Ys)(de),name:e};yield(0,h.RE)(g.IM.teacherAPIHandeler.update,t),yield nt()}())})),Jt=(0,M.fA)("startChangeTeacherDescription",(function*(){yield(0,h.gz)(F.MK.actions.setModalState({teacherDescriptionShowMore:!0})),yield(0,h.gz)(L.actions.startEditingField("description"))})),en=(0,M.fA)("changeTeacherDescription",(function(e){let{payload:t}=e;return function*(){yield(0,h.gz)(L.actions.setEditingResource({description:t}))}()})),tn=(0,M.fA)("confirmChangeTeacherDescription",(function*(){(yield(0,h.Ys)(Ne))&&(yield(0,h.gz)(L.actions.finishEditingField("description")),yield function*(){const e=yield(0,h.Ys)(He),t={...yield(0,h.Ys)(de),description:e};yield(0,h.RE)(g.IM.teacherAPIHandeler.update,t),yield nt()}())})),nn=(0,M.fA)("changeAbonementType",(function(e){let{payload:t}=e;return function*(){yield(0,h.gz)(T.actions.setEditingResource({type:t}))}()})),on=(0,M.fA)("changeAbonementLimitLessons",(function(e){let{payload:t}=e;return function*(){yield(0,h.gz)(T.actions.setEditingResource({limitLessons:t}))}()})),sn=(0,M.fA)("changeAbonementPrice",(function(e){let{payload:t}=e;return function*(){yield(0,h.gz)(T.actions.setEditingResource({price:t}))}()})),cn=(0,M.fA)("changeSubjectDescription",(function(e){let{payload:t}=e;return function*(){yield(0,h.gz)(E.actions.setEditingResource({description:t}))}()})),an=(0,M.fA)("changeRulePeriodicityType",(function(e){let{payload:t}=e;return function*(){(yield(0,h.Ys)(Ae))!==t&&(yield(0,h.gz)(N.actions.setEditingResource({periodicity:{periodicityType:t,periodicityRule:[]}})))}()})),rn=(0,M.fA)("toggleRuleWeekDay",(function(e){let{payload:t}=e;return function*(){const e=yield(0,h.Ys)(we),n=(o=t,(i=e).includes(o)?i.filter((e=>e!==o)):i.concat([o]));var i,o;yield(0,h.gz)(N.actions.setEditingResource({periodicity:{periodicityType:C.wy.weekly,periodicityRule:n}}))}()})),ln=(0,M.fA)("changeRuleStartTime",(function(e){let{payload:t}=e;return function*(){yield(0,h.gz)(N.actions.setEditingResource({timeStart:t}))}()})),dn=(0,M.fA)("changeRuleDuration",(function(e){let{payload:t}=e;return function*(){yield(0,h.gz)(N.actions.setEditingResource({durationMin:t}))}()})),un=(0,M.fA)("changeRuleMonthDay",(function(e){let{payload:t}=e;return function*(){const e=[t];yield(0,h.gz)(N.actions.setEditingResource({periodicity:{periodicityType:C.wy.manualDate,periodicityRule:e}}))}()})),hn=(0,M.fA)("changeAbonementSubjects",(function(e){let{payload:t}=e;return function*(){yield(0,h.gz)(T.actions.setEditingResource({subjects:t}))}()})),gn=(0,M.fA)("deleteAbonementSubject",(function(e){let{payload:t}=e;return function*(){const e=(yield(0,h.Ys)(je)).filter((e=>e!==t));yield(0,h.gz)(T.actions.setEditingResource({subjects:e}))}()})),fn=(0,M.fA)("startChangeSubjectDescription",(function*(){yield(0,h.gz)(F.MK.actions.setModalState({subjectDescriptionShowMore:!0})),yield(0,h.gz)(E.actions.startEditingField("description"))})),yn=(0,M.fA)("confirmChangeSubjectDescription",(function*(){yield(0,h.gz)(E.actions.finishEditingField("description"))})),mn=(0,M.fA)("changeAbonementLimitTime",(function(e){let{payload:t}=e;return function*(){yield(0,h.gz)(T.actions.setEditingResource({limitTime:t}))}()})),pn=async e=>{const t=await g.IM.lessonAPIHandeler.single(e);return console.log("lesson ".concat(e," fetched"),t),t},jn=async(e,t)=>{console.log("status lesson ".concat(t," chenged to ").concat(e))},xn=async e=>{console.log("studen ".concat(e," removed"))},bn=async e=>{console.log("studen ".concat(e," added"))},Mn=async e=>{console.log("studen ".concat(e," called"))},An=async e=>{console.log("studen ".concat(e," get new notification"))};function*Sn(e){const t=yield(0,h.RE)(pn,e),n=t.date.toDate();return{...t,date:n}}const wn=(0,M.fA)("navigateLesson",(function(e){let{payload:t}=e;return function*(){const e=yield Sn(t);console.log("lesson in navigateLesson",e),yield(0,h.gz)(P.actions.setLessonState(e)),yield(0,h.gz)(F.MK.actions.setModalState({teacherView:F.xF.lessonPage}))}()})),vn=(0,M.fA)("removeStudentFromLesson",(function(e){let{payload:t}=e;return function*(){const e=yield function*(e){yield(0,h.RE)(xn,e);const t=yield(0,h.Ys)(G);return yield Sn(t)}(t);yield(0,h.gz)(P.actions.setLessonState(e))}()})),Cn=(0,M.fA)("cancelLesson",(function*(){const e=yield function*(){const e=yield(0,h.Ys)(G);return yield(0,h.RE)(jn,C.UN.canceled,e),yield Sn(e)}();yield(0,h.gz)(P.actions.setLessonState(e))})),Zn=(0,M.fA)("finalizeLesson",(function*(){const e=yield function*(){const e=yield(0,h.Ys)(G);return yield(0,h.RE)(jn,C.UN.finished,e),yield Sn(e)}();yield(0,h.gz)(P.actions.setLessonState(e))})),Rn=(0,M.fA)("addStudentToLesson",(function(e){let{payload:t}=e;return function*(){const e=yield function*(e){yield(0,h.RE)(bn,e);const t=yield(0,h.Ys)(G);return yield Sn(t)}(t);yield(0,h.gz)(P.actions.setLessonState(e))}()})),In=(0,M.fA)("sendAnotherNotification",(function(e){let{payload:t}=e;return function*(){yield function*(e){yield(0,h.RE)(An,e)}(t)}()})),Dn=(0,M.fA)("requestStatusChange",(function(e){let{payload:t}=e;return function*(){const e=yield function*(e){yield(0,h.RE)(Mn,e);const t=yield(0,h.Ys)(G);return yield Sn(t)}(t);yield(0,h.gz)(P.actions.setLessonState(e))}()})),kn=(0,M.fA)("changeAddParticipantSearch",(function(e){let{payload:t}=e;return function*(){yield(0,h.gz)(D.actions.setFilters({search:t}))}()})),zn=(0,M.fA)("searchParticipantToAdd",(function*(){const e=yield function*(){const e=yield(0,h.Ys)(Q);return yield(0,h.RE)(ut,e)}();yield(0,h.gz)(D.actions.setResourses(e))})),Ln=(0,M.fA)("onToday",(function*(){const e=new Date;yield(0,h.gz)(F.MK.actions.setModalState({currentDate:e})),yield mt()})),En=(0,M.fA)("onChengeDateForward",(function*(){const e=yield(0,h.Ys)(b.VI),t=(0,yt.Z)(e,7);yield(0,h.gz)(F.MK.actions.setModalState({currentDate:t})),yield mt()})),Tn=(0,M.fA)("onChengeDateBackward",(function*(){const e=yield(0,h.Ys)(b.VI),t=(0,ft.Z)(e,7);yield(0,h.gz)(F.MK.actions.setModalState({currentDate:t})),yield mt()}));var Nn=n(1964);const Fn=r.v9,Hn=(0,M.$O)(O,(function*(){yield(0,h.$6)([(0,h.rM)((0,M.By)(s)),(0,h.rM)((0,M.By)(c)),(0,h.rM)((0,M.By)(o)),(0,h.rM)((0,M.By)(a)),(0,h.rM)((0,M.By)(i)),(0,h.rM)((0,M.By)(Nn))])}))();var Pn=n(228),Vn=n(3978),On=n(4565),Yn=n(1091),Kn=n(184);const Bn=()=>{const e=(0,r.I0)(),t=Fn(Ge.d),n=Fn(Ge.p1),i=!!t.id;return(0,d.useEffect)((()=>{const t=(0,l.Aj)(u.I8,(n=>(n&&e(p.action(n)),()=>t())))}),[e]),(0,Kn.jsxs)(Pn.Z,{children:[i&&(0,Kn.jsxs)(Pn.Z,{display:"flex",margin:"30px 0",children:[(0,Kn.jsx)(Pn.Z,{width:"4rem",height:"4rem",children:(0,Kn.jsx)(Vn.Z,{src:n})}),(0,Kn.jsxs)(Pn.Z,{children:[(0,Kn.jsx)(On.Z,{variant:"h4",children:t.displayName}),(0,Kn.jsx)(On.Z,{children:t.email}),(0,Kn.jsx)(On.Z,{children:t.providerId}),(0,Kn.jsx)(On.Z,{children:t.id})]})]}),i?(0,Kn.jsx)(Kn.Fragment,{children:(0,Kn.jsx)(Yn.Z,{onClick:()=>e(Nn.signOutCommand.action()),children:"Sign out"})}):(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)(Yn.Z,{onClick:()=>e(j.action()),children:"Sign in with Google"}),(0,Kn.jsx)(Yn.Z,{onClick:()=>e(x.action()),children:"Sign in with Facebook"})]})]})};var Wn=n(168),Un=n(277),$n=n(6931),Qn=n(3154),_n=n(5728);const Gn=e=>{let{id:t,avatar:n,name:i,command:o,actionButtomTitle:s}=e;return(0,Kn.jsx)($n.Z,{children:[(0,Kn.jsxs)(Pn.Z,{display:"flex",alignItems:"center",children:[(0,Kn.jsx)(Vn.Z,{sizes:"large",src:n}),(0,Kn.jsxs)(On.Z,{padding:"0px 10px",variant:"h6",children:[" ",i]})]}),(0,Kn.jsx)(Kn.Fragment,{children:s&&(0,Kn.jsx)(Qn.S,{options:[{title:s,command:o}]})})],onClick:()=>{}},t)},Xn=()=>{const e=(0,r.I0)(),t=Fn(q),n=Fn(ee);return(0,Kn.jsx)(Kn.Fragment,{children:t.length?(0,Kn.jsx)(Pn.Z,{className:"declained list",children:t.map((t=>(0,Kn.jsx)(Gn,{...t,command:()=>e(Dn.action(t.id)),actionButtomTitle:n?"Request status change (Add)":""})))}):(0,Kn.jsx)(_n.p,{className:"declained warning masage",mesage:"the Declained list is empty"})})};var qn,Jn,ei,ti,ni,ii=n(2554),oi=n(2320),si=n(1131);const ci=(0,Un.ZP)("div")(qn||(qn=(0,Wn.Z)(["\n  height: 100%;\n"]))),ai=(0,Un.ZP)(Pn.Z)(Jn||(Jn=(0,Wn.Z)(["\n  background-color: #c4c4ca;\n  display:flex;\n  flex-direction: row-reverse;\n  justify-content: space-between;\n  width: 100%;\n  border-top-right-radius: 8px;\n  border-top-left-radius: 8px;\n  height: 46px;\n"]))),ri=(0,Un.ZP)(Pn.Z)(ei||(ei=(0,Wn.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  height: 100%;\n"]))),li=(0,Un.ZP)(Pn.Z)(ti||(ti=(0,Wn.Z)(["\n  top: 8px;\n  width: 30px;\n  position: absolute;\n  right: calc(50% - 15px);\n"]))),di=(0,Un.ZP)(li)(ni||(ni=(0,Wn.Z)(["\n  height: 6px;\n  background-color: #3e3b3b;\n  border-radius: 3;\n"]))),ui=e=>{let{children:t,comandChilden:n,resizable:i=!1,modalMode:o,onChangeModalMode:s,...c}=e;const a=o===pt.g.fillHeight,r=o!==pt.g.closed,l=o===pt.g.halfHeight&&i,d=o===pt.g.fillHeight&&i,u=a?100:50;return(0,Kn.jsxs)(ci,{children:[(0,Kn.jsx)(ii.xB,{styles:{".MuiDrawer-root > .MuiPaper-root":{height:"".concat(u,"%"),overflow:"visible"},".MuiDrawer-root > .MuiBackdrop-root":{backgroundColor:"transparent"}}}),(0,Kn.jsx)(oi.Z,{anchor:"bottom",open:r,onClose:()=>{d?s(pt.g.halfHeight):d||s(pt.g.closed)},onOpen:()=>{r?l&&s(pt.g.fillHeight):s(pt.g.halfHeight)},swipeAreaWidth:0,disableSwipeToOpen:!1,ModalProps:{keepMounted:!0},children:(0,Kn.jsxs)(ri,{children:[(0,Kn.jsx)(ai,{children:n}),d?(0,Kn.jsx)(li,{onClick:()=>s(pt.g.halfHeight),children:(0,Kn.jsx)(si.Z,{fontSize:"large"})}):(0,Kn.jsx)(di,{onClick:()=>s(pt.g.fillHeight)}),t]})})]})};var hi,gi=n(5642),fi=n(401);const yi=(0,Un.ZP)(Pn.Z)(hi||(hi=(0,Wn.Z)(["\n  height: 100%;\n"]))),mi={display:"flex",justifyContent:"center",alignItems:"center"},pi=()=>{const e=Fn(b.fX),t=Fn($),n=Fn(_),i=t.length>0,o=(0,r.I0)(),s=[(0,Kn.jsx)(gi.Vw,{onClick:()=>o(Nt.action()),type:gi.L$.cancel},"closeLessonAddParticipiantModal")];return(0,Kn.jsx)(ui,{comandChilden:s,modalMode:e?pt.g.fillHeight:pt.g.closed,onChangeModalMode:()=>o(Dt.action()),children:(0,Kn.jsxs)(yi,{sx:i?{}:mi,children:[(0,Kn.jsx)(fi.U,{text:n,onChangeSearch:e=>o(kn.action(e)),onSearch:()=>o(zn.action())}),i&&(0,Kn.jsx)(Pn.Z,{children:t.map((e=>(0,d.createElement)(Gn,{...e,key:e.id,command:()=>o(Rn.action(e.id)),actionButtomTitle:"Send invite to lesson"})))})]})})};var ji,xi,bi=n(3811),Mi=n(2419),Ai=n(225),Si=n(6720);const wi=(0,Ai.Z)(bi.Z)(ji||(ji=(0,Wn.Z)(["\n    border: 1px solid grey;\n    background-color: white;\n"]))),vi=(0,Ai.Z)(Pn.Z)(xi||(xi=(0,Wn.Z)(["\n    position: fixed;\n    bottom: ","px;\n    right: 50px;\n    z-index: 1200;\n"])),20+Si.xQ),Ci=e=>{let{onClick:t,...n}=e;return(0,Kn.jsx)(vi,{...n,children:(0,Kn.jsx)(wi,{onClick:t,children:(0,Kn.jsx)(Mi.Z,{fontSize:"large"})})})};const Zi=()=>{const e=(0,r.I0)();return(0,Kn.jsx)(Ci,{onClick:()=>e(Tt.action())})};const Ri=()=>{const e=(0,r.I0)(),t=Fn(W)===C.UN.finished;return(0,Kn.jsx)(Kn.Fragment,{children:t&&(0,Kn.jsx)(Pn.Z,{width:"100%",display:"flex",justifyContent:"center",position:"absolute",bottom:"".concat(Si.xQ+16,"px"),children:(0,Kn.jsx)(Yn.Z,{variant:"contained",color:"success",onClick:()=>e(Zn.action()),children:"Finalize"})})})};const Ii=()=>{const e=(0,r.I0)(),t=Fn(X),n=Fn(ee);return(0,Kn.jsx)(Kn.Fragment,{children:t.length?(0,Kn.jsx)(Pn.Z,{children:t.map((t=>(0,Kn.jsx)(Gn,{...t,command:()=>e(vn.action(t.id)),actionButtomTitle:n?"Student Absant (remove)":""})))}):(0,Kn.jsx)(_n.p,{mesage:"the Accepted list is empty"})})};var Di=n(4111);const ki=()=>{const e=(0,r.I0)(),t=Fn(B);return(0,Kn.jsx)(Di.B,{type:t.status,scheduled:t.date,title:t.subject.name,onCancel:()=>e(Cn.action())})};var zi;const Li=(0,Ai.Z)(Pn.Z)(zi||(zi=(0,Wn.Z)(["\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  height: 4rem;\n  width: 100%;\n  border-bottom: 1px solid grey;\n  margin-bottom: 1rem;\n  margin-top: 3rem;\n"]))),Ei=()=>{const e=(0,r.I0)(),t=Fn(b.P6),n=t===F.NZ.accepted,i=t===F.NZ.pending,o=t===F.NZ.declained;return(0,Kn.jsxs)(Li,{children:[(0,Kn.jsx)(gi.Vw,{type:gi.L$.accepted,onClick:()=>e(zt.action()),isActive:n,title:"Accepted"}),(0,Kn.jsx)(gi.Vw,{type:gi.L$.pending,onClick:()=>e(Lt.action()),isActive:i,title:"Pending"}),(0,Kn.jsx)(gi.Vw,{type:gi.L$.declained,onClick:()=>e(Et.action()),isActive:o,title:"Declained"})]})},Ti=()=>{const e=(0,r.I0)(),t=Fn(J),n=Fn(ee);return(0,Kn.jsx)(Kn.Fragment,{children:t.length?(0,Kn.jsx)(Pn.Z,{children:t.map((t=>(0,Kn.jsx)(Gn,{...t,command:()=>e(In.action(t.id)),actionButtomTitle:n?"Send another notification":""})))}):(0,Kn.jsx)(_n.p,{mesage:"the Pending list is empty"})})};var Ni=n(7678);const Fi=()=>{const e=Fn(b.P6),t=Fn(te),n=Fn(W),i=n===C.UN.done||n===C.UN.canceled,o=(0,r.I0)();return(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)(ki,{}),(0,Kn.jsxs)(Ni.k,{onSwipeLeft:()=>{switch(e){case F.NZ.accepted:o(Lt.action());break;case F.NZ.pending:o(Et.action());case F.NZ.declained:}},onSwipeRight:()=>{switch(e){case F.NZ.accepted:break;case F.NZ.pending:o(zt.action());break;case F.NZ.declained:o(Lt.action())}},children:[t&&(0,Kn.jsx)(Ei,{}),(0,Kn.jsx)(Pn.Z,{marginTop:t?0:2,children:(0,Kn.jsx)(Hi,{})}),!i&&(0,Kn.jsx)(Zi,{})]}),(0,Kn.jsx)(pi,{}),(0,Kn.jsx)(Ri,{})]})},Hi=()=>{const e=Fn(b.P6),t=Fn(W),n=Fn(te),i=e===F.NZ.accepted,o=e===F.NZ.pending,s=e===F.NZ.declained,c=t===C.UN.scheduled;return(0,Kn.jsx)(Kn.Fragment,{children:n?(0,Kn.jsxs)(Kn.Fragment,{children:[i&&(0,Kn.jsx)(Ii,{}),o&&(0,Kn.jsx)(Ti,{}),s&&(0,Kn.jsx)(Xn,{})]}):(0,Kn.jsx)(Kn.Fragment,{children:c?(0,Kn.jsx)(Ti,{}):(0,Kn.jsx)(Ii,{})})})};var Pi=n(4420),Vi=n(9365),Oi=n(9407),Yi=n(1898),Ki=n(3057),Bi=n(5209);const Wi={PaperProps:{style:{maxHeight:224,width:250}}},Ui=e=>{let{options:t,onChange:n,selected:i,...o}=e;const s=t.filter((e=>i.includes(e.id))),c=t.filter((e=>!i.includes(e.id))),a=s.map((e=>e.title)),[r,l]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{c.length||l(!1)}),[c]),(0,Kn.jsx)(Pn.Z,{...o,children:(0,Kn.jsxs)(Yi.Z,{fullWidth:!0,children:[(0,Kn.jsx)(Vi.Z,{id:"multiple-chip-label",children:"Subjects"}),(0,Kn.jsx)(Ki.Z,{labelId:"multiple-chip-label",id:"multiple-chip",multiple:!0,value:a,input:(0,Kn.jsx)(Pi.Z,{id:"select-multiple-chip",label:"Subjects"}),renderValue:()=>(0,Kn.jsx)(Pn.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:s&&s.map((e=>(0,Kn.jsx)(Bi.Z,{label:e.title,onMouseDown:e=>{e.stopPropagation()},onDelete:()=>{n(e.id)}},e.id)))}),MenuProps:Wi,open:r,onOpen:()=>{c.length&&l(!0)},onClose:()=>l(!1),children:c.map((e=>(0,Kn.jsx)(Oi.Z,{value:e.title,onClick:()=>{n(e.id)},children:e.title},e.id)))})]})})};var $i=n(768),Qi=n(5017),_i=n(8254);const Gi=e=>{let{onChange:t,value:n,endAdornment:i,placeHolder:o,...s}=e;return(0,Kn.jsx)(Qi.Z,{...s,fullWidth:!0,type:"number",placeholder:o,value:0===n?"":n,onChange:e=>{const n=parseInt(e.target.value);t(n<0||!n?0:n)},InputProps:{endAdornment:i&&(0,Kn.jsx)(_i.Z,{position:"end",children:i})}})},Xi=()=>{const e=(0,r.I0)(),t=Fn(b.Nh),n=Fn(ye),i=Fn(xe),o=Fn(me),s=Fn(pe),c=Fn(je),a=Fn(le),l=s===C.DK.unlimited,d=t?pt.g.fillHeight:pt.g.closed,u=[(0,Kn.jsx)(gi.Vw,{onClick:()=>e(Ot.action()),type:gi.L$.confirm},"confirm"),(0,Kn.jsx)(gi.Vw,{onClick:()=>e(Ct.action()),type:gi.L$.cancel},"cancel")];return(0,Kn.jsx)(Kn.Fragment,{children:t&&(0,Kn.jsx)(ui,{modalMode:d,onChangeModalMode:()=>e(Dt.action()),comandChilden:u,children:(0,Kn.jsxs)(Pn.Z,{margin:2,children:[(0,Kn.jsx)(Ui,{options:a,selected:c,onChange:t=>{const n=(o=t,(i=c).includes(o)?i.filter((e=>e!==o)):i.concat([o]));var i,o;e(hn.action(n))}}),(0,Kn.jsx)($i.P,{marginTop:2,marginBottom:2,onChange:t=>e(nn.action(t)),options:[{id:C.DK.limited,title:C.DK.limited},{id:C.DK.unlimited,title:C.DK.unlimited}],selected:l?C.DK.unlimited:C.DK.limited}),(0,Kn.jsx)(Pn.Z,{marginBottom:2,children:l?(0,Kn.jsx)(Gi,{onChange:t=>e(mn.action(t)),placeHolder:"Limit time",value:i,endAdornment:"Month"}):(0,Kn.jsx)(Gi,{onChange:t=>e(on.action(t)),placeHolder:"Limit lessons",value:n,endAdornment:"Lessons"})}),(0,Kn.jsx)(Gi,{onChange:t=>e(sn.action(t)),placeHolder:"placeHolder",value:o,endAdornment:"GEL"})]})})})};const qi=()=>{const e=(0,r.I0)();return(0,Kn.jsx)(Ci,{onClick:()=>e(vt.action())})};const Ji=()=>{const e=(0,r.I0)();return(0,Kn.jsx)(Ci,{onClick:()=>e(wt.action())})};var eo=n(4825),to=n(3509),no=n(5681),io=n(8121);const oo=()=>{const e=(0,r.I0)(),t=Fn(Fe),n=Fn(Te);return(0,Kn.jsx)(no.t,{onClickOutside:()=>e(qt.action()),children:(0,Kn.jsxs)(io.h4,{children:[n?(0,Kn.jsx)(Pn.Z,{width:"100%",overflow:"auto",height:"100%",children:(0,Kn.jsx)(to.nv,{type:to.T3.header,text:t,onChange:t=>e(Xt.action(t))})}):(0,Kn.jsx)(On.Z,{noWrap:!0,textOverflow:"ellipsis",overflow:"hidden",maxWidth:"17rem",onClick:()=>e(Gt.action()),children:t||"click to add your name"}),(0,Kn.jsx)(eo.J,{})]})})};var so=n(9276),co=n(1508),ao=n(7585);const ro=e=>{let{name:t,rules:n,editCommand:i,deleteCommand:o}=e;const s=(0,ao.h)(n);return(0,Kn.jsx)($n.Z,{children:[(0,Kn.jsx)(Di.N,{children:t},"subjectName"),(0,Kn.jsx)(Qn.S,{options:[{title:"Edit",command:i},{title:"Delete",command:o}]},"subjectMenu"),(0,Kn.jsx)(Di.N,{children:s},"subjectRulesInfo")],onClick:i})},lo=()=>{const e=(0,r.I0)(),t=Fn(ie);return(0,Kn.jsx)(so.Z,{height:"100%",overflow:"auto",children:t.length?t.map((t=>(0,Kn.jsx)(ro,{editCommand:()=>{e(Bt.action(t.id))},deleteCommand:()=>{e(Ht.action(t.id))},...t},t.id))):(0,Kn.jsx)(co.Z,{severity:"info",children:"Add your subject"})})};var uo;const ho=(0,Ai.Z)(so.Z)(uo||(uo=(0,Wn.Z)(["\n    display: flex;\n    height: 80;\n    align-items: center;\n    padding: 0.5rem;\n    justify-content: space-around;\n"]))),go=()=>{const e=(0,r.I0)(),t=Fn(b.bJ),n=t===F.MB.subjects,i=t===F.MB.abonements;return(0,Kn.jsxs)(ho,{children:[(0,Kn.jsx)(gi.Vw,{type:gi.L$.abonements,onClick:()=>e(At.action()),title:"abonements",isActive:i}),(0,Kn.jsx)(gi.Vw,{type:gi.L$.subjects,onClick:()=>e(Mt.action()),title:"subjects",isActive:n})]})};var fo=n(5678),yo=n(5172),mo=n(4299),po=n(15),jo=n(3794),xo=n(879);const bo=()=>{const e=Fn(ce),t=Fn(ae),n=Fn(Ge.Y0),i=Fn(He),o=Fn(Ne),s=Fn(b.KD),c=Fn(mo.v3),a=(0,r.I0)(),l=(0,d.useRef)(null),[u,h]=d.useState(!1);return(0,d.useEffect)((()=>{if(l.current){const e=l.current,t=e.scrollHeight;h(t>mo.Hb),e.scrollTop=0}}),[i,s,o]),(0,Kn.jsxs)(xo.Gt,{minHeight:mo.QH+c,children:[(0,Kn.jsxs)(xo.HI,{height:mo.QH,children:[(0,Kn.jsx)(xo.To,{children:(0,Kn.jsx)(po.q,{image:n,size:mo.bd,onClick:()=>{}})}),(0,Kn.jsxs)(xo.To,{children:[(0,Kn.jsx)(On.Z,{textAlign:"center",children:e}),(0,Kn.jsx)(On.Z,{textAlign:"center",children:"Subjects"})]}),(0,Kn.jsxs)(xo.To,{children:[(0,Kn.jsx)(On.Z,{textAlign:"center",children:t}),(0,Kn.jsx)(On.Z,{textAlign:"center",children:"Abonements"})]})]}),(0,Kn.jsx)(no.t,{onClickOutside:()=>a(tn.action()),children:(0,Kn.jsx)(xo.NF,{ref:l,height:c,maxHeight:c,overflow:s?"auto":"hidden",onClick:()=>a(Jt.action()),children:o?(0,Kn.jsx)(to.nv,{type:to.T3.textArea,text:i,onChange:e=>a(en.action(e))}):(0,Kn.jsx)(On.Z,{style:{wordWrap:"break-word"},gutterBottom:!0,onClick:()=>a(Jt.action()),children:i||"add your description"})})}),u&&!o&&(0,Kn.jsx)(jo.A,{title:"See more",onClick:()=>a(Rt.action()),children:s?(0,Kn.jsx)(fo.Z,{}):(0,Kn.jsx)(yo.Z,{})})]})};const Mo=e=>{let{id:t,price:n,limitLessons:i,subjectsFormatted:o,editCommand:s,deleteCommand:c}=e;const a=i?"".concat(i," ").concat(i>1?"Lessons":"Lesson"):"";return(0,Kn.jsx)($n.Z,{children:[(0,Kn.jsx)(Di.N,{children:o},"".concat(t,"_subjectsFormatted")),(0,Kn.jsx)(Qn.S,{options:[{title:"Edit",command:s},{title:"Delete",command:c}]},"".concat(t,"_menu")),(0,Kn.jsx)(On.Z,{children:n},"".concat(t,"_price")),(0,Kn.jsx)(On.Z,{children:a},"".concat(t,"_limitLessons"))],onClick:s},t)},Ao=()=>{const e=(0,r.I0)(),t=Fn(oe),n=Fn(re);return(0,Kn.jsx)(Pn.Z,{height:"100%",overflow:"auto",children:t.length?t.map((t=>(0,d.createElement)(Mo,{...t,key:t.id,subjectsFormatted:n.get(t.id)||"",editCommand:()=>e(Wt.action(t.id)),deleteCommand:()=>e(Pt.action(t.id))}))):(0,Kn.jsx)(co.Z,{severity:"info",children:"Add your abonement offer"})})},So=()=>{const e=(0,r.I0)();return(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)(oo,{}),(0,Kn.jsxs)(Ni.k,{onSwipeLeft:()=>e(Mt.action()),onSwipeRight:()=>e(At.action()),children:[(0,Kn.jsx)(bo,{}),(0,Kn.jsx)(go,{}),(0,Kn.jsx)(wo,{})]})]})},wo=()=>{switch(Fn(b.bJ)){case F.MB.subjects:return(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)(lo,{}),(0,Kn.jsx)(Ji,{})]});case F.MB.abonements:return(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)(Ao,{}),(0,Kn.jsx)(qi,{}),(0,Kn.jsx)(Xi,{})]});default:return(0,Kn.jsx)(Kn.Fragment,{})}};var vo=n(9972),Co=n(7892),Zo=n.n(Co),Ro=n(1652),Io=n(7792),Do=n(2504),ko=n(5447);let zo=function(e){return e.DateTime="DateTime",e.Time="Time",e}({});const Lo=e=>{let{type:t,onChange:n,currentDate:i,placeHolder:o,...s}=e;const c=t===zo.Time,a=i?Zo()(i):void 0;return(0,Kn.jsx)(Pn.Z,{...s,marginTop:2,marginBottom:2,children:(0,Kn.jsx)(Ro._,{dateAdapter:Io.y,children:c?(0,Kn.jsx)(Do.d,{value:a,onChange:e=>{e&&n(e.toDate())},label:o}):(0,Kn.jsx)(ko.W,{value:a,onChange:e=>{e&&n(e.toDate())},label:o})})})};var Eo=n(6582);const To=e=>{let{checked:t,onChange:n,...i}=e;return(0,Kn.jsx)(Eo.Z,{variant:"outlined",fullWidth:!0,children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(((e,i)=>{const o=t.includes(i);return(0,Kn.jsx)(Yn.Z,{onClick:()=>n(i),variant:o?"contained":"outlined",children:e},e)}))})},No=()=>{const e=Fn(b.jr),t=Fn(b.Uz),n=(0,r.I0)(),i=Fn(we),o=Fn(Ae),s=Fn(Se),c=Fn(Me),a=o===C.wy.manualDate,l=a?new Date(i[0]):new Date,d=a?l:(0,vo.b)(l,s),u=[(0,Kn.jsx)(gi.Vw,{onClick:()=>{n(Kt.action())},type:gi.L$.confirm},"confirmSavingRule"),(0,Kn.jsx)(gi.Vw,{onClick:()=>n(kt.action()),type:gi.L$.cancel},"cancelModifyRule")];return(0,Kn.jsx)(Kn.Fragment,{children:e&&(0,Kn.jsx)(ui,{comandChilden:u,modalMode:e?t:pt.g.closed,onChangeModalMode:()=>n(Dt.action()),resizable:!0,children:(0,Kn.jsxs)(Pn.Z,{margin:2,children:[(0,Kn.jsx)($i.P,{marginBottom:2,onChange:e=>n(an.action(e)),options:[{id:C.wy.manualDate,title:C.wy.manualDate},{id:C.wy.weekly,title:C.wy.weekly}],selected:a?C.wy.manualDate:C.wy.weekly}),(0,Kn.jsx)(Pn.Z,{children:a?(0,Kn.jsx)(Lo,{currentDate:d,type:zo.DateTime,onChange:e=>{n(un.action(e.getTime())),n(ln.action(e))}}):(0,Kn.jsxs)(Pn.Z,{children:[(0,Kn.jsx)(To,{onChange:e=>n(rn.action(e)),checked:i}),(0,Kn.jsx)(Lo,{currentDate:d,type:zo.Time,onChange:e=>n(ln.action(e))})]})}),(0,Kn.jsx)(Gi,{onChange:e=>n(dn.action(e)),placeHolder:"Duration",value:c,endAdornment:"min"})]})})})};let Fo=function(e){return e.startCreatingRule="startCreatingRule",e}({});const Ho=()=>{const e=(0,r.I0)();return(0,Kn.jsx)(Ci,{className:Fo.startCreatingRule,onClick:()=>e(It.action())})};var Po=n(3050);const Vo=()=>{const e=Fn(Oe),t=Fn(b.VI),n=Fn(b.MO),i=Fn(b.iX),o=(0,r.I0)();return(0,Kn.jsx)(Pn.Z,{flexGrow:1,overflow:"auto",height:i?"100%":"60%",children:(0,Kn.jsx)(Po.f,{lessons:e,onLessonClick:e=>{o(wn.action(e))},representationType:n,startDate:t,onChengeDateBackward:()=>o(Tn.action()),onChengeDateForward:()=>o(En.action()),onToday:()=>o(Ln.action())})})};var Oo;const Yo=(0,Ai.Z)(Pn.Z)(Oo||(Oo=(0,Wn.Z)(["\n  padding: 0 1rem;\n  box-sizing: content-box;\n  left: 0;\n"]))),Ko=()=>{const e=(0,d.useRef)(null),[t,n]=d.useState(!1),i=Fn(ke),o=Fn(Ie),s=Fn(b.iX),c=Fn(mo.zo),a=(0,r.I0)();return(0,d.useEffect)((()=>{if(e.current){const t=e.current,i=t.scrollHeight;n(i>mo.Hb),t.scrollTop=0}}),[i,s,o]),(0,Kn.jsxs)(Pn.Z,{className:mo._j,children:[(0,Kn.jsx)(no.t,{onClickOutside:()=>a(yn.action()),children:(0,Kn.jsx)(Yo,{ref:e,minHeight:60,maxHeight:c,overflow:s?"auto":"hidden",children:o?(0,Kn.jsx)(to.nv,{type:to.T3.textArea,text:i,onChange:e=>a(cn.action(e))}):(0,Kn.jsx)(On.Z,{style:{wordWrap:"break-word"},gutterBottom:!0,onClick:()=>a(fn.action()),children:i||"add description your subject"})})}),t&&!o&&(0,Kn.jsx)(Pn.Z,{className:"show-more-wrapper",display:"flex",justifyContent:"center",children:(0,Kn.jsx)(jo.A,{title:"See more",onClick:()=>a(Zt.action()),children:s?(0,Kn.jsx)(fo.Z,{}):(0,Kn.jsx)(yo.Z,{})})})]})};var Bo=n(7431);const Wo=()=>{const e=(0,r.I0)(),t=Fn(De),n=Fn(Re);return(0,Kn.jsx)(no.t,{onClickOutside:()=>{n&&e(_t.action())},children:(0,Kn.jsxs)(io.h4,{children:[(0,Kn.jsx)(Bo.h,{type:gi.L$.cancel,onClick:()=>e(St.action())}),n?(0,Kn.jsx)(Pn.Z,{width:"100%",overflow:"auto",height:"100%",children:(0,Kn.jsx)(to.nv,{type:to.T3.header,text:t,onChange:t=>e(Qt.action(t))})}):(0,Kn.jsx)(On.Z,{noWrap:!0,textOverflow:"ellipsis",overflow:"hidden",maxWidth:"17rem",onClick:()=>e($t.action()),children:t||"add title your subject"}),(0,Kn.jsx)(Bo.h,{type:gi.L$.confirm,onClick:()=>{e(Yt.action())}})]})})};var Uo=n(2916);const $o=e=>{let{timeStart:t,durationMin:n,periodicity:i,editCommand:o,deleteCommand:s}=e;const c=(0,Uo.LA)(i),a=(0,Uo.dV)(i,t);return(0,Kn.jsx)($n.Z,{children:[(0,Kn.jsx)(On.Z,{noWrap:!0,textOverflow:"ellipsis",overflow:"hidden",maxWidth:"17rem",children:c},"ruleText"),(0,Kn.jsx)(Qn.S,{options:[{title:"Edit",command:o},{title:"Delete",command:s}]},"menu"),(0,Kn.jsx)(On.Z,{children:"".concat(n," min")},"duration"),(0,Kn.jsx)(On.Z,{children:a},"timeStart")],onClick:o})},Qo=()=>{const e=Fn(Ve),t=(0,r.I0)();return(0,Kn.jsx)(Pn.Z,{flexGrow:1,overflow:"auto",children:e.length?e.map((e=>(0,Kn.jsx)($o,{editCommand:()=>t(Ut.action(e.id)),deleteCommand:()=>t(Vt.action(e.id)),...e},e.id))):(0,Kn.jsx)(co.Z,{severity:"info",children:"No rules"})})},_o=()=>{const e=Fn(Ue),t=Fn($e),n=Fn(b.VI),i=Fn(b.MO),o=(0,r.I0)();return(0,Kn.jsx)(Pn.Z,{className:"rule-preview-calendar",position:"absolute",top:0,height:"50%",width:"100%",zIndex:1300,bgcolor:"#fff",overflow:"auto",children:(0,Kn.jsx)(Po.f,{lessons:e,representationType:i,onLessonClick:()=>{},warningOnOverlapingEvents:t,startDate:n,onChengeDateBackward:()=>o(Tn.action()),onChengeDateForward:()=>o(En.action()),onToday:()=>o(Ln.action())})})};var Go;const Xo=()=>{const e=Fn(b.jr),t=Fn(b.Uz),n=Fn(b.iX),i=t===pt.g.halfHeight,o=e&&i,[s,c]=d.useState(300),a="calc(100% - ".concat(s,"px)"),r=(0,d.useRef)(null);(0,d.useEffect)((()=>{if(r.current){const e=r.current.clientHeight+50;e!==s&&c(e)}}),[s]);const l=(0,Ai.Z)(Pn.Z)(Go||(Go=(0,Wn.Z)(["\n    display: flex;\n    flex-grow: 1;\n    flex-direction: column;\n    overflow: auto;\n  "])));return(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)(Wo,{}),(0,Kn.jsxs)(Ni.k,{onSwipeLeft:()=>console.log("swipeLeft"),onSwipeRight:()=>console.log("swipeRight"),children:[(0,Kn.jsx)(l,{height:"100%",children:!e&&(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)(Pn.Z,{ref:r,children:(0,Kn.jsx)(Ko,{})}),(0,Kn.jsxs)(l,{height:a,children:[(0,Kn.jsx)(Vo,{}),!n&&(0,Kn.jsx)(Qo,{})]})]})}),(0,Kn.jsx)(Ho,{})]}),o&&(0,Kn.jsx)(_o,{}),(0,Kn.jsx)(No,{})]})};let qo=function(e){return e.navigateSchedule="navigateSchedule",e.navigateSubjectList="navigateSubjectList",e}({});const Jo=()=>{const e=(0,r.I0)(),t=Fn(Ge.Y0),n=Fn(b.Nb),i=n===F.xF.schedule,o=n===F.xF.subjectList;return(0,Kn.jsxs)(Si.$_,{children:[(0,Kn.jsx)(gi.Vw,{className:qo.navigateSchedule,type:gi.L$.schedule,onClick:()=>e(xt.action()),isActive:i}),(0,Kn.jsx)(gi.Vw,{className:qo.navigateSubjectList,type:gi.L$.avatar,onClick:()=>e(bt.action()),isActive:o,image:t})]})};const es=()=>{const e=Fn(K),t=Fn(b.MO),n=Fn(b.VI),i=(0,r.I0)();return(0,Kn.jsx)(Po.f,{lessons:e,onLessonClick:e=>{i(wn.action(e))},representationType:t,startDate:n,onChengeDateBackward:()=>i(Tn.action()),onChengeDateForward:()=>i(En.action()),onToday:()=>i(Ln.action())})};var ts=n(666);const ns=()=>{const e=(0,r.I0)(),t=[{id:F.QW.schedule,title:"Schedule"},{id:F.QW.calendarWeek,title:"Week"}],n=Fn(b.IQ);return(0,Kn.jsxs)(io.h4,{children:[(0,Kn.jsx)(ts.G,{options:t,title:"Abonement",currentOption:n,onChange:t=>{const n=t;e(jt.action(n))}}),(0,Kn.jsx)(eo.J,{})]})},is=()=>{const e=(0,r.I0)();return(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)(ns,{}),(0,Kn.jsx)(Ni.k,{onSwipeRight:()=>e(xt.action()),onSwipeLeft:()=>e(bt.action()),children:(0,Kn.jsx)(es,{})})]})},os=()=>(0,Kn.jsxs)(Kn.Fragment,{children:[(0,Kn.jsx)(cs,{}),(0,Kn.jsx)(Jo,{})]}),ss=()=>{const e=(0,r.I0)();(0,d.useEffect)((()=>{const t=(0,l.Aj)(u.I8,(n=>(n&&e(p.action(n)),e(Ft.action()),()=>t())))}),[e]);const t=Fn(Ge.Zw);return(0,Kn.jsx)(Kn.Fragment,{children:t?(0,Kn.jsx)(os,{}):(0,Kn.jsx)(Bn,{})})},cs=()=>{switch(Fn(b.Nb)){case F.xF.schedule:return(0,Kn.jsx)(is,{});case F.xF.subjectList:return(0,Kn.jsx)(So,{});case F.xF.subjectPage:return(0,Kn.jsx)(Xo,{});case F.xF.lessonPage:return(0,Kn.jsx)(Fi,{});default:return(0,Kn.jsx)(Kn.Fragment,{})}},as=()=>(0,Kn.jsx)(r.zt,{store:Hn,children:(0,Kn.jsx)(ss,{})})}}]);
//# sourceMappingURL=365.61b889e9.chunk.js.map