"use strict";(self.webpackChunkabonement_front=self.webpackChunkabonement_front||[]).push([[40],{6577:(e,t,n)=>{n.r(t),n.d(t,{default:()=>js});var i={};n.r(i),n.d(i,{alreadyAuthenticatedUser:()=>x,authenticateFacebook:()=>M,authenticateWithFirebase:()=>b});var o={};n.r(o),n.d(o,{exampleApiCommand:()=>q,exampleCommand:()=>X,exampleResetCommand:()=>J});var s={};n.r(s),n.d(s,{cancelModifyRule:()=>Yt,cancelModifySubject:()=>Lt,closeAbonementModal:()=>Ft,closeLessonAddParticipiantModal:()=>$t,lessonAcceptedView:()=>Kt,lessonDiclainedView:()=>Wt,lessonPendingView:()=>Bt,navigateSchedule:()=>Dt,navigateSubjectList:()=>zt,openLessonAddParticipiantModal:()=>Ut,setTecherCalendarRepresentationType:()=>It,startCreatingAbonements:()=>Nt,startCreatingRule:()=>Vt,startCreatingSubject:()=>Tt,subcectListViewSubjects:()=>kt,subjectListViewAbonements:()=>Et,subjectShowMore:()=>Ht,teacherShowMore:()=>Pt,toggleRuleModalMode:()=>Ot});var a={};n.r(a),n.d(a,{confirmSavingAbonementOffer:()=>qt,confirmSavingRule:()=>en,confirmSavingSubject:()=>Jt,startDeletingAbonement:()=>Gt,startDeletingRule:()=>Xt,startDeletingSubject:()=>_t,startEditingAbonementOffer:()=>nn,startEditingRule:()=>on,startEditingSubject:()=>tn,startTeacherApp:()=>Qt});var c={};n.r(c),n.d(c,{changeAbonementLimitLessons:()=>mn,changeAbonementLimitTime:()=>Rn,changeAbonementPrice:()=>yn,changeAbonementSubjects:()=>wn,changeAbonementType:()=>fn,changeRuleDuration:()=>Mn,changeRuleMonthDay:()=>Sn,changeRulePeriodicityType:()=>jn,changeRuleStartTime:()=>bn,changeSubjectDescription:()=>pn,changeSubjectName:()=>an,changeTeacherDescription:()=>hn,changeTeacherName:()=>ln,confirmChangeSubjectDescription:()=>Zn,confirmChangeSubjectName:()=>cn,confirmChangeTeacherDescription:()=>gn,confirmChangeTeacherName:()=>dn,deleteAbonementSubject:()=>Cn,startChangeSubjectDescription:()=>vn,startChangeSubjectName:()=>sn,startChangeTeacherDescription:()=>un,startChangeTeacherName:()=>rn,toggleRuleWeekDay:()=>xn});var r={};n.r(r),n.d(r,{addStudentToLesson:()=>Pn,cancelLesson:()=>Fn,changeAddParticipantSearch:()=>Yn,finalizeLesson:()=>Hn,navigateLesson:()=>Tn,onChengeDateBackward:()=>Un,onChengeDateForward:()=>Wn,onToday:()=>Bn,removeStudentFromLesson:()=>Nn,requestStatusChange:()=>On,searchParticipantToAdd:()=>Kn,sendAnotherNotification:()=>Vn});var l=n(9434),d=n(7593),u=n(2791),h=n(3309),g=n(1879),f=n(7780),m=n(3608),y=n(2731);const p=function(e){let{id:t,displayName:n,photoURL:i}=e;return function*(){if(t){const e=yield(0,f.RE)(m.IM.teacherAPIHandeler.single,t);if(!(e&&e.name&&e.avatar&&e.abonementOffers)){const e={id:t,name:n||"",description:"",avatar:i||"",subjects:[],abonementOffers:[]};yield(0,f.RE)(m.IM.teacherAPIHandeler.update,e)}}}()};var j=n(126);const{alreadyAuthenticatedUser:x,authenticateWithFirebase:b,authenticateFacebook:M}=(0,j.A)((function*(e){const t=(0,y.d)(e.providerData[0]);yield(0,f.RE)(p,t)}),p);var S=n(305),w=n(1501),C=n(6598),v=n(5514),Z=n(7977),R=n(6382);const A={id:"",name:"Harry Potter",avatar:"",description:"",subjects:[],abonementOffers:[]},I=(0,R.oM)({name:"teacherDomainView",initialState:A,reducers:{setDomainView:(e,t)=>{let{payload:n}=t;return{...n}},resetDomainView:()=>({...A})}}),D={message:"",count:0},z=(0,R.oM)({name:"exampleSlice",initialState:D,reducers:{setExample:(e,t)=>{let{payload:n}=t;return{...n}},resetExample:()=>({...D})}});var k=n(2312),E=n(947);const L=(0,E.gH)({id:"",name:"",description:"",rules:[],teacherId:""},"externalSubjects"),T=(0,E.gH)({id:"",date:new Date,durationMin:0,accepted:[],status:k.UN.scheduled,declained:[],subject:{id:"",name:"",description:"",rules:[],teacherId:""},teacherId:"",participants:[]},"externalLessons"),N=(0,E.gH)({id:"",name:"",avatar:""},"externalUsers"),F=(0,E.gH)({id:"",name:"",description:"",avatar:"",abonementOffers:[],subjects:[]},"externalTeachers");var H=n(1816);const P=(0,H.N)({id:"",name:"",abonementOffers:[],subjects:[],description:"",avatar:""},"editingTeacher"),V=(0,H.N)({id:"",name:"",description:"",rules:[],teacherId:""},"editingSubject"),O=(0,H.N)({id:"",type:k.DK.limited,subjects:[],limitTime:0,limitLessons:0,price:0,teacherId:""},"editingAbonementOffer"),Y=(0,H.N)({id:"",timeStart:new Date,durationMin:0,periodicity:{periodicityType:k.wy.weekly,periodicityRule:[]},teacherId:"",subjectId:""},"editableRule");var K=n(2444);const B={id:"",date:new Date,participants:[],durationMin:0,status:k.UN.scheduled,accepted:[],declained:[],subject:{id:"",name:"",description:"",rules:[],teacherId:""},teacherId:""},W=(0,R.oM)({name:"lesson",initialState:B,reducers:{setLessonState:(e,t)=>{let{payload:n}=t;return{...e,...n}},resetLessonState:()=>({...B})}});var U=n(9438);const $=(0,C.UY)({loading:Z.m.reducer,error:v.k.reducer,example:z.reducer,teacherDomain:I.reducer,externalLessons:T.reducer,externalSubjects:L.reducer,externalTeachers:F.reducer,externalUsers:N.reducer,editableAbonementOffer:O.reducer,editableRule:Y.reducer,editableSubject:V.reducer,editableTeacher:P.reducer,modal:K.MK.reducer,lesson:W.reducer,userProfile:U.B.reducer});var Q=n(5224);const _="I am example api responce",G=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;return{count:e,message:t}};const X=(0,Q.f)("exampleCommand",(function(e){let{payload:t}=e;return function*(){yield(0,f.RE)(console.info,t)}()})),q=(0,Q.f)("exampleApiCommand",(function(e){let{payload:t}=e;return function*(){const e=yield function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;return function*(){return yield(0,f.RE)(G,e,t)}()}(t);yield(0,f.gz)(z.actions.setExample(e)),yield(0,f.RE)(console.info,e)}()})),J=(0,Q.f)("exampleResetCommand",(function*(){yield(0,f.gz)(z.actions.resetExample())})),ee=e=>e.externalLessons,te=e=>ee(e).data,ne=e=>e.lesson,ie=e=>ne(e).status,oe=e=>e.externalUsers,se=e=>oe(e).data,ae=e=>oe(e).filters,ce=e=>ae(e).search||"",re=e=>ne(e).id,le=e=>{const{participants:t,accepted:n}=ne(e),i=new Set(n);return t.filter((e=>i.has(e.id)))},de=e=>{const{participants:t,declained:n}=ne(e),i=new Set(n);return t.filter((e=>i.has(e.id)))},ue=e=>{const{participants:t,accepted:n,declained:i}=ne(e),o=new Set([...n,...i]);return t.filter((e=>!o.has(e.id)))},he=e=>{const t=ie(e);return t===k.UN.inProcess||t===k.UN.finished},ge=e=>{const t=ie(e);return t===k.UN.inProcess||t===k.UN.finished||t===k.UN.commingSoon},fe=e=>e.teacherDomain,me=e=>fe(e).subjects,ye=e=>fe(e).abonementOffers,pe=e=>t=>me(t).find((t=>t.id===e)),je=e=>me(e).length,xe=e=>ye(e).length,be=e=>{const t=new Map,n=ye(e),i=me(e);return n.forEach((e=>{const n=i.filter((t=>e.subjects.includes(t.id))).map((e=>e.name)).join(", ");t.set(e.id,n)})),t},Me=e=>me(e).map((e=>({id:e.id,title:e.name}))),Se=e=>{const t=fe(e),{abonementOffers:n,subjects:i,...o}=t;return{...o,abonementOffers:Ce(e),subjects:we(e)}},we=e=>me(e).map((e=>e.id)),Ce=e=>ye(e).map((e=>e.id));var ve=n(9078);const Ze=e=>(e=>e.editableAbonementOffer)(e).data,Re=e=>Ze(e).limitLessons,Ae=e=>Ze(e).price,Ie=e=>Ze(e).type,De=e=>Ze(e).subjects,ze=e=>Ze(e).limitTime,ke=e=>(e=>e.editableRule)(e).data,Ee=e=>ke(e).durationMin,Le=e=>ke(e).periodicity.periodicityType,Te=e=>ke(e).timeStart,Ne=e=>ke(e).periodicity.periodicityRule,Fe=e=>e.editableSubject,He=e=>Fe(e).data,Pe=e=>t=>(e=>Fe(e).fieldsEditing)(t)[e],Ve=Pe("name"),Oe=Pe("description"),Ye=e=>He(e).name,Ke=e=>He(e).description,Be=e=>e.editableTeacher,We=e=>Be(e).data,Ue=e=>t=>(e=>Be(e).fieldsEditing)(t)[e],$e=Ue("name"),Qe=Ue("description"),_e=e=>We(e).name,Ge=e=>We(e).description,Xe=e=>He(e).id,qe=e=>He(e).rules,Je=e=>{const t=Xe(e);return te(e).filter((e=>e.subject.id===t))},et=e=>{const t=(0,S.VI)(e),n=(e=>{const t=me(e),n=Xe(e);return t.filter((e=>e.id!==n))})(e);return(0,ve.t)(n,k.He.outerSchedule,t)},tt=e=>{const t=qe(e),n=(e=>ke(e).id)(e);return t.filter((e=>e.id!==n))},nt=e=>{const t=(0,S.VI)(e),n=(e=>({...He(e),rules:tt(e)}))(e);return(0,ve.oO)(n,k.He.thisSubjectSchedule,t)},it=e=>{const t=(0,S.VI)(e),n=He(e),i=ke(e);return(0,ve.Xt)(n,i,k.He.editingRuleSchedule,t)},ot=e=>[...et(e),...nt(e),...it(e)],st=e=>{const t=et(e),n=nt(e),i=it(e),o=[...t,...n];return(0,ve.Kj)(i,o)},at=e=>({...He(e),rules:ct(e)}),ct=e=>{var t;return(null===(t=He(e).rules)||void 0===t?void 0:t.map((e=>e.id)))||[]};function*rt(e){yield function*(e){const t=yield(0,f.Ys)((e=>t=>{const n=pe(e)(t),i=null===n||void 0===n?void 0:n.rules;return null===i||void 0===i?void 0:i.map((e=>e.id))})(e));for(const n of t)yield(0,f.RE)(ht,n)}(e),yield(0,f.RE)(m.IM.subjectApiHandeler.delete,e)}function*lt(e){const t=yield(0,f.Ys)(Se),n=[...t.subjects,e],i={...t,subjects:n};yield(0,f.RE)(m.IM.teacherAPIHandeler.update,i)}function*dt(){const e=yield(0,f.Ys)(g.b1),t=yield(0,f.Ys)(Ze),n={...t,teacherId:e},{id:i,...o}=n;if(!i){const e=yield(0,f.RE)(m.IM.abonementOffer.create,o);yield function*(e){const t=yield(0,f.Ys)(Se),n=[...t.abonementOffers,e],i={...t,abonementOffers:n};yield(0,f.RE)(m.IM.teacherAPIHandeler.update,i)}(e)}else yield(0,f.RE)(m.IM.abonementOffer.update,t)}function*ut(e){const{id:t,...n}=e;if(!t){const e=yield(0,f.RE)(m.IM.rulesApiHandeler.create,n);yield function*(e){var t;const n=yield(0,f.Ys)(He),i=[...(null===(t=n.rules)||void 0===t?void 0:t.map((e=>e.id)))||[],e],o={...n,rules:i};yield(0,f.RE)(m.IM.subjectApiHandeler.update,o)}(e)}else yield(0,f.RE)(m.IM.rulesApiHandeler.update,e)}function*ht(e){yield(0,f.RE)(m.IM.rulesApiHandeler.delete,e)}const gt=function*(){const e=yield function*(){const e=yield(0,f.Ys)(g.b1);if(e)try{return{...yield(0,f.RE)(m.bH,e),id:e}}catch(t){console.log(t)}else console.warn("User is not authenticated")}();yield(0,f.gz)(I.actions.setDomainView(e)),yield(0,f.gz)(P.actions.setEditingResource(e))},ft=function*(){yield(0,f.gz)(O.actions.reset())},mt=function*(){yield(0,f.gz)(Y.actions.reset())},yt=function*(){yield(0,f.gz)(V.actions.reset())},pt=function*(){yield(0,f.gz)(K.MK.actions.resetModalState())},jt=function*(){const e=yield(0,f.Ys)(Xe),t=yield(0,f.Ys)(pe(e));yield(0,f.gz)(V.actions.setEditingResource(t))};function*xt(){yield(0,f.gz)(K.MK.actions.setModalState({isAbonementModalOpen:!1}))}function*bt(){yield(0,f.gz)(K.MK.actions.setModalState({isNewRuleModalOpen:!1}))}function*Mt(){yield(0,f.gz)(K.MK.actions.setModalState({teacherView:K.xF.subjectList}))}const St=async e=>await m.IM.userAPIHandeler.list("",e),wt=async(e,t)=>{const n=await m.IM.lessonAPIHandeler.list(e,t);return Ct(n)},Ct=e=>e.map((e=>({...e,date:e.date.toDate()})));var vt=n(6753),Zt=n(9040);function*Rt(){const e=yield(0,f.Ys)(S.VI),t=(0,vt.Z)(e,7),n=(0,Zt.Z)(e,7);yield(0,f.gz)(T.actions.setFilters({startDate:t,endDate:n}))}var At=n(9901);const It=(0,Q.f)("setTecherCalendarRepresentationTypeCalendarWeek",(function(e){let{payload:t}=e;return function*(){yield(0,f.gz)(K.MK.actions.setModalState({techerCalendarRepresentationType:t}))}()})),Dt=(0,Q.f)("navigateSchedule",(function*(){yield pt(),yield(0,f.gz)(K.MK.actions.setModalState({teacherView:K.xF.schedule}))})),zt=(0,Q.f)("navigateSubjectList",(function*(){yield pt(),yield(0,f.gz)(K.MK.actions.setModalState({teacherView:K.xF.subjectList}))})),kt=(0,Q.f)("subcectListViewSubjects",(function*(){yield(0,f.gz)(K.MK.actions.setModalState({subjectListView:K.MB.subjects}))})),Et=(0,Q.f)("subjectListViewAbonements",(function*(){yield(0,f.gz)(K.MK.actions.setModalState({subjectListView:K.MB.abonements}))})),Lt=(0,Q.f)("cancelModifySubject",(function*(){yield pt(),yield Mt(),yield yt()})),Tt=(0,Q.f)("startCreatingSubject",(function*(){yield(0,f.gz)(It.action(K.QW.calendarWeek)),yield(0,f.gz)(K.MK.actions.setModalState({teacherView:K.xF.subjectPage}))})),Nt=(0,Q.f)("startCreatingAbonements",(function*(){yield(0,f.gz)(K.MK.actions.setModalState({isAbonementModalOpen:!0}))})),Ft=(0,Q.f)("closeAbonementModal",(function*(){yield xt(),yield ft()})),Ht=(0,Q.f)("subjectShowMore",(function*(){const e=yield(0,f.Ys)(S.iX);yield(0,f.gz)(K.MK.actions.setModalState({subjectDescriptionShowMore:!e}))})),Pt=(0,Q.f)("teacherShowMore",(function*(){const e=yield(0,f.Ys)(S.KD);yield(0,f.gz)(K.MK.actions.setModalState({teacherDescriptionShowMore:!e}))})),Vt=(0,Q.f)("startCreatingRule",(function*(){yield(0,f.gz)(K.MK.actions.setModalState({isNewRuleModalOpen:!0}))})),Ot=(0,Q.f)("toggleRuleModalMode",(function*(){(yield(0,f.Ys)(S.Uz))===At.g.halfHeight?yield(0,f.gz)(K.MK.actions.setModalState({ruleModalMode:At.g.fillHeight})):yield(0,f.gz)(K.MK.actions.setModalState({ruleModalMode:At.g.halfHeight}))})),Yt=(0,Q.f)("cancelModifyRule",(function*(){yield bt(),yield mt()})),Kt=(0,Q.f)("lessonAcceptedView",(function*(){yield(0,f.gz)(K.MK.actions.setModalState({lessonView:K.NZ.accepted}))})),Bt=(0,Q.f)("lessonPendingView",(function*(){yield(0,f.gz)(K.MK.actions.setModalState({lessonView:K.NZ.pending}))})),Wt=(0,Q.f)("lessonDiclainedView",(function*(){yield(0,f.gz)(K.MK.actions.setModalState({lessonView:K.NZ.declained}))})),Ut=(0,Q.f)("openLessonAddParticipiantModal",(function*(){yield(0,f.gz)(K.MK.actions.setModalState({isLessonAddParticipantModalOpen:!0}))})),$t=(0,Q.f)("closeLessonAddParticipiantModal",(function*(){yield(0,f.gz)(K.MK.actions.setModalState({isLessonAddParticipantModalOpen:!1}))})),Qt=(0,Q.f)("startTeacherApp",(function*(){yield gt(),yield Rt(),yield function*(){const e=yield(0,f.Ys)(g.b1),t=yield(0,f.Ys)(ae),n=yield(0,f.RE)(wt,e,t);yield(0,f.gz)(T.actions.setResourses(n))}()})),_t=(0,Q.f)("startDeletingSubject",(function(e){let{payload:t}=e;return function*(){yield rt(t),yield gt()}()})),Gt=(0,Q.f)("startDeletingAbonement",(function(e){let{payload:t}=e;return function*(){yield function*(e){yield(0,f.RE)(m.IM.abonementOffer.delete,e)}(t),yield gt()}()})),Xt=(0,Q.f)("startDeletingRule",(function(e){let{payload:t}=e;return function*(){yield ht(t),yield gt(),yield jt(),yield bt(),yield mt()}()})),qt=(0,Q.f)("confirmSavingAbonement",(function*(){yield dt(),yield gt(),yield xt(),yield ft()})),Jt=(0,Q.f)("confirmSavingSubject",(function*(){yield function*(){const e=yield(0,f.Ys)(g.b1),t={...yield(0,f.Ys)(at),teacherId:e},{id:n,...i}=t;if(n)yield(0,f.RE)(m.IM.subjectApiHandeler.update,t);else{const e=yield(0,f.RE)(m.IM.subjectApiHandeler.create,i);yield lt(e)}}(),yield gt(),yield pt(),yield Mt(),yield yt()})),en=(0,Q.f)("confirmSavingRule",(function*(){yield function*(){const e=yield(0,f.Ys)(Xe),t=yield(0,f.Ys)(g.b1),n=yield(0,f.Ys)(ke);if(e){const i={...n,subjectId:e,teacherId:t};yield(0,f.RE)(ut,i)}else{const e={...yield(0,f.Ys)(at),teacherId:t},{id:i,...o}=e,s=yield(0,f.RE)(m.IM.subjectApiHandeler.create,o);yield lt(s),yield(0,f.gz)(V.actions.setEditingResource({id:s,teacherId:t}));const a={...n,subjectId:s,teacherId:t};yield(0,f.RE)(ut,a)}}(),yield gt(),yield jt(),yield bt(),yield mt()})),tn=(0,Q.f)("startEditingSubject",(function(e){let{payload:t}=e;return function*(){const e=yield(0,f.Ys)(pe(t));yield(0,f.gz)(V.actions.setEditingResource(e)),yield(0,f.gz)(It.action(K.QW.calendarWeek)),yield(0,f.gz)(K.MK.actions.setModalState({teacherView:K.xF.subjectPage}))}()})),nn=(0,Q.f)("startEditingAbonementOffer",(function(e){let{payload:t}=e;return function*(){const e=yield(0,f.Ys)((n=t,e=>ye(e).find((e=>e.id===n))));var n;yield(0,f.gz)(O.actions.setEditingResource(e)),yield(0,f.gz)(K.MK.actions.setModalState({isAbonementModalOpen:!0}))}()})),on=(0,Q.f)("startEditingRule",(function(e){let{payload:t}=e;return function*(){const e=yield(0,f.Ys)(Xe),n=(yield(0,f.Ys)(pe(e))).rules.find((e=>e.id===t));n&&(yield(0,f.gz)(Y.actions.setEditingResource(n)),yield(0,f.gz)(K.MK.actions.setModalState({isNewRuleModalOpen:!0})))}()})),sn=(0,Q.f)("startChangeSubjectName",(function*(){yield(0,f.gz)(V.actions.startEditingField("name"))})),an=(0,Q.f)("changeSubjectName",(function(e){let{payload:t}=e;return function*(){yield(0,f.gz)(V.actions.setEditingResource({name:t}))}()})),cn=(0,Q.f)("confirmChangeSubjectName",(function*(){yield(0,f.gz)(V.actions.finishEditingField("name"))})),rn=(0,Q.f)("startChangeTeacherName",(function*(){yield(0,f.gz)(P.actions.startEditingField("name"))})),ln=(0,Q.f)("changeTeacherName",(function(e){let{payload:t}=e;return function*(){yield(0,f.gz)(P.actions.setEditingResource({name:t}))}()})),dn=(0,Q.f)("confirmChangeTeacherName",(function*(){(yield(0,f.Ys)($e))&&(yield(0,f.gz)(P.actions.finishEditingField("name")),yield function*(){const e=yield(0,f.Ys)(_e),t={...yield(0,f.Ys)(Se),name:e};yield(0,f.RE)(m.IM.teacherAPIHandeler.update,t),yield gt()}())})),un=(0,Q.f)("startChangeTeacherDescription",(function*(){yield(0,f.gz)(K.MK.actions.setModalState({teacherDescriptionShowMore:!0})),yield(0,f.gz)(P.actions.startEditingField("description"))})),hn=(0,Q.f)("changeTeacherDescription",(function(e){let{payload:t}=e;return function*(){yield(0,f.gz)(P.actions.setEditingResource({description:t}))}()})),gn=(0,Q.f)("confirmChangeTeacherDescription",(function*(){(yield(0,f.Ys)(Qe))&&(yield(0,f.gz)(P.actions.finishEditingField("description")),yield function*(){const e=yield(0,f.Ys)(Ge),t={...yield(0,f.Ys)(Se),description:e};yield(0,f.RE)(m.IM.teacherAPIHandeler.update,t),yield gt()}())})),fn=(0,Q.f)("changeAbonementType",(function(e){let{payload:t}=e;return function*(){yield(0,f.gz)(O.actions.setEditingResource({type:t}))}()})),mn=(0,Q.f)("changeAbonementLimitLessons",(function(e){let{payload:t}=e;return function*(){yield(0,f.gz)(O.actions.setEditingResource({limitLessons:t}))}()})),yn=(0,Q.f)("changeAbonementPrice",(function(e){let{payload:t}=e;return function*(){yield(0,f.gz)(O.actions.setEditingResource({price:t}))}()})),pn=(0,Q.f)("changeSubjectDescription",(function(e){let{payload:t}=e;return function*(){yield(0,f.gz)(V.actions.setEditingResource({description:t}))}()})),jn=(0,Q.f)("changeRulePeriodicityType",(function(e){let{payload:t}=e;return function*(){(yield(0,f.Ys)(Le))!==t&&(yield(0,f.gz)(Y.actions.setEditingResource({periodicity:{periodicityType:t,periodicityRule:[]}})))}()})),xn=(0,Q.f)("toggleRuleWeekDay",(function(e){let{payload:t}=e;return function*(){const e=yield(0,f.Ys)(Ne),n=(o=t,(i=e).includes(o)?i.filter((e=>e!==o)):i.concat([o]));var i,o;yield(0,f.gz)(Y.actions.setEditingResource({periodicity:{periodicityType:k.wy.weekly,periodicityRule:n}}))}()})),bn=(0,Q.f)("changeRuleStartTime",(function(e){let{payload:t}=e;return function*(){yield(0,f.gz)(Y.actions.setEditingResource({timeStart:t}))}()})),Mn=(0,Q.f)("changeRuleDuration",(function(e){let{payload:t}=e;return function*(){yield(0,f.gz)(Y.actions.setEditingResource({durationMin:t}))}()})),Sn=(0,Q.f)("changeRuleMonthDay",(function(e){let{payload:t}=e;return function*(){const e=[t];yield(0,f.gz)(Y.actions.setEditingResource({periodicity:{periodicityType:k.wy.manualDate,periodicityRule:e}}))}()})),wn=(0,Q.f)("changeAbonementSubjects",(function(e){let{payload:t}=e;return function*(){yield(0,f.gz)(O.actions.setEditingResource({subjects:t}))}()})),Cn=(0,Q.f)("deleteAbonementSubject",(function(e){let{payload:t}=e;return function*(){const e=(yield(0,f.Ys)(De)).filter((e=>e!==t));yield(0,f.gz)(O.actions.setEditingResource({subjects:e}))}()})),vn=(0,Q.f)("startChangeSubjectDescription",(function*(){yield(0,f.gz)(K.MK.actions.setModalState({subjectDescriptionShowMore:!0})),yield(0,f.gz)(V.actions.startEditingField("description"))})),Zn=(0,Q.f)("confirmChangeSubjectDescription",(function*(){yield(0,f.gz)(V.actions.finishEditingField("description"))})),Rn=(0,Q.f)("changeAbonementLimitTime",(function(e){let{payload:t}=e;return function*(){yield(0,f.gz)(O.actions.setEditingResource({limitTime:t}))}()})),An=async e=>{const t=await m.IM.lessonAPIHandeler.single(e);return console.log("lesson ".concat(e," fetched"),t),t},In=async(e,t)=>{console.log("status lesson ".concat(t," chenged to ").concat(e))},Dn=async e=>{console.log("studen ".concat(e," removed"))},zn=async e=>{console.log("studen ".concat(e," added"))},kn=async e=>{console.log("studen ".concat(e," called"))},En=async e=>{console.log("studen ".concat(e," get new notification"))};function*Ln(e){const t=yield(0,f.RE)(An,e),n=t.date.toDate();return{...t,date:n}}const Tn=(0,Q.f)("navigateLesson",(function(e){let{payload:t}=e;return function*(){const e=yield Ln(t);console.log("lesson in navigateLesson",e),yield(0,f.gz)(W.actions.setLessonState(e)),yield(0,f.gz)(K.MK.actions.setModalState({teacherView:K.xF.lessonPage}))}()})),Nn=(0,Q.f)("removeStudentFromLesson",(function(e){let{payload:t}=e;return function*(){const e=yield function*(e){yield(0,f.RE)(Dn,e);const t=yield(0,f.Ys)(re);return yield Ln(t)}(t);yield(0,f.gz)(W.actions.setLessonState(e))}()})),Fn=(0,Q.f)("cancelLesson",(function*(){const e=yield function*(){const e=yield(0,f.Ys)(re);return yield(0,f.RE)(In,k.UN.canceled,e),yield Ln(e)}();yield(0,f.gz)(W.actions.setLessonState(e))})),Hn=(0,Q.f)("finalizeLesson",(function*(){const e=yield function*(){const e=yield(0,f.Ys)(re);return yield(0,f.RE)(In,k.UN.finished,e),yield Ln(e)}();yield(0,f.gz)(W.actions.setLessonState(e))})),Pn=(0,Q.f)("addStudentToLesson",(function(e){let{payload:t}=e;return function*(){const e=yield function*(e){yield(0,f.RE)(zn,e);const t=yield(0,f.Ys)(re);return yield Ln(t)}(t);yield(0,f.gz)(W.actions.setLessonState(e))}()})),Vn=(0,Q.f)("sendAnotherNotification",(function(e){let{payload:t}=e;return function*(){yield function*(e){yield(0,f.RE)(En,e)}(t)}()})),On=(0,Q.f)("requestStatusChange",(function(e){let{payload:t}=e;return function*(){const e=yield function*(e){yield(0,f.RE)(kn,e);const t=yield(0,f.Ys)(re);return yield Ln(t)}(t);yield(0,f.gz)(W.actions.setLessonState(e))}()})),Yn=(0,Q.f)("changeAddParticipantSearch",(function(e){let{payload:t}=e;return function*(){yield(0,f.gz)(N.actions.setFilters({search:t}))}()})),Kn=(0,Q.f)("searchParticipantToAdd",(function*(){const e=yield function*(){const e=yield(0,f.Ys)(ae);return yield(0,f.RE)(St,e)}();yield(0,f.gz)(N.actions.setResourses(e))})),Bn=(0,Q.f)("onToday",(function*(){const e=new Date;yield(0,f.gz)(K.MK.actions.setModalState({currentDate:e})),yield Rt()})),Wn=(0,Q.f)("onChengeDateForward",(function*(){const e=yield(0,f.Ys)(S.VI),t=(0,Zt.Z)(e,7);yield(0,f.gz)(K.MK.actions.setModalState({currentDate:t})),yield Rt()})),Un=(0,Q.f)("onChengeDateBackward",(function*(){const e=yield(0,f.Ys)(S.VI),t=(0,vt.Z)(e,7);yield(0,f.gz)(K.MK.actions.setModalState({currentDate:t})),yield Rt()}));var $n=n(1964);const Qn=l.v9,_n=(0,w.$O)($,(function*(){yield(0,f.$6)([(0,f.rM)((0,Q.B)(o)),(0,f.rM)((0,Q.B)(a)),(0,f.rM)((0,Q.B)(c)),(0,f.rM)((0,Q.B)(s)),(0,f.rM)((0,Q.B)(r)),(0,f.rM)((0,Q.B)(i)),(0,f.rM)((0,Q.B)($n))])}))();var Gn=n(228),Xn=n(3978),qn=n(4565),Jn=n(1091),ei=n(184);const ti=()=>{const e=(0,l.I0)(),t=Qn(g.d),n=Qn(g.p1),i=!!t.id;return(0,u.useEffect)((()=>{const t=(0,d.Aj)(h.I8,(n=>(n&&e(x.action(n)),()=>t())))}),[e]),(0,ei.jsxs)(Gn.Z,{children:[i&&(0,ei.jsxs)(Gn.Z,{display:"flex",margin:"30px 0",children:[(0,ei.jsx)(Gn.Z,{width:"4rem",height:"4rem",children:(0,ei.jsx)(Xn.Z,{src:n})}),(0,ei.jsxs)(Gn.Z,{children:[(0,ei.jsx)(qn.Z,{variant:"h4",children:t.displayName}),(0,ei.jsx)(qn.Z,{children:t.email}),(0,ei.jsx)(qn.Z,{children:t.providerId}),(0,ei.jsx)(qn.Z,{children:t.id})]})]}),i?(0,ei.jsx)(ei.Fragment,{children:(0,ei.jsx)(Jn.Z,{onClick:()=>e($n.signOutCommand.action()),children:"Sign out"})}):(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(Jn.Z,{onClick:()=>e(b.action()),children:"Sign in with Google"}),(0,ei.jsx)(Jn.Z,{onClick:()=>e(M.action()),children:"Sign in with Facebook"})]})]})};var ni=n(168),ii=n(277),oi=n(6931),si=n(3154),ai=n(5728);const ci=e=>{let{id:t,avatar:n,name:i,command:o,actionButtomTitle:s}=e;return(0,ei.jsx)(oi.Z,{children:[(0,ei.jsxs)(Gn.Z,{display:"flex",alignItems:"center",children:[(0,ei.jsx)(Xn.Z,{sizes:"large",src:n}),(0,ei.jsxs)(qn.Z,{padding:"0px 10px",variant:"h6",children:[" ",i]})]}),(0,ei.jsx)(ei.Fragment,{children:s&&(0,ei.jsx)(si.S,{options:[{title:s,command:o}]})})],onClick:()=>{}},t)},ri=()=>{const e=(0,l.I0)(),t=Qn(de),n=Qn(he);return(0,ei.jsx)(ei.Fragment,{children:t.length?(0,ei.jsx)(Gn.Z,{className:"declained list",children:t.map((t=>(0,ei.jsx)(ci,{...t,command:()=>e(On.action(t.id)),actionButtomTitle:n?"Request status change (Add)":""})))}):(0,ei.jsx)(ai.p,{className:"declained warning masage",mesage:"the Declained list is empty"})})};var li,di,ui,hi,gi,fi=n(2554),mi=n(2320),yi=n(1131);const pi=(0,ii.ZP)("div")(li||(li=(0,ni.Z)(["\n  height: 100%;\n"]))),ji=(0,ii.ZP)(Gn.Z)(di||(di=(0,ni.Z)(["\n  background-color: #c4c4ca;\n  display:flex;\n  flex-direction: row-reverse;\n  justify-content: space-between;\n  width: 100%;\n  border-top-right-radius: 8px;\n  border-top-left-radius: 8px;\n  height: 46px;\n"]))),xi=(0,ii.ZP)(Gn.Z)(ui||(ui=(0,ni.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  height: 100%;\n"]))),bi=(0,ii.ZP)(Gn.Z)(hi||(hi=(0,ni.Z)(["\n  top: 8px;\n  width: 30px;\n  position: absolute;\n  right: calc(50% - 15px);\n"]))),Mi=(0,ii.ZP)(bi)(gi||(gi=(0,ni.Z)(["\n  height: 6px;\n  background-color: #3e3b3b;\n  border-radius: 3;\n"]))),Si=e=>{let{children:t,comandChilden:n,resizable:i=!1,modalMode:o,onChangeModalMode:s,...a}=e;const c=o===At.g.fillHeight,r=o!==At.g.closed,l=o===At.g.halfHeight&&i,d=o===At.g.fillHeight&&i,u=c?100:50;return(0,ei.jsxs)(pi,{children:[(0,ei.jsx)(fi.xB,{styles:{".MuiDrawer-root > .MuiPaper-root":{height:"".concat(u,"%"),overflow:"visible"},".MuiDrawer-root > .MuiBackdrop-root":{backgroundColor:"transparent"}}}),(0,ei.jsx)(mi.Z,{anchor:"bottom",open:r,onClose:()=>{d?s(At.g.halfHeight):d||s(At.g.closed)},onOpen:()=>{r?l&&s(At.g.fillHeight):s(At.g.halfHeight)},swipeAreaWidth:0,disableSwipeToOpen:!1,ModalProps:{keepMounted:!0},children:(0,ei.jsxs)(xi,{children:[(0,ei.jsx)(ji,{children:n}),d?(0,ei.jsx)(bi,{onClick:()=>s(At.g.halfHeight),children:(0,ei.jsx)(yi.Z,{fontSize:"large"})}):(0,ei.jsx)(Mi,{onClick:()=>s(At.g.fillHeight)}),t]})})]})};var wi,Ci=n(5642),vi=n(401);const Zi=(0,ii.ZP)(Gn.Z)(wi||(wi=(0,ni.Z)(["\n  height: 100%;\n"]))),Ri={display:"flex",justifyContent:"center",alignItems:"center"},Ai=()=>{const e=Qn(S.fX),t=Qn(se),n=Qn(ce),i=t.length>0,o=(0,l.I0)(),s=[(0,ei.jsx)(Ci.Vw,{onClick:()=>o($t.action()),type:Ci.L$.cancel},"closeLessonAddParticipiantModal")];return(0,ei.jsx)(Si,{comandChilden:s,modalMode:e?At.g.fillHeight:At.g.closed,onChangeModalMode:()=>o(Ot.action()),children:(0,ei.jsxs)(Zi,{sx:i?{}:Ri,children:[(0,ei.jsx)(vi.U,{text:n,onChangeSearch:e=>o(Yn.action(e)),onSearch:()=>o(Kn.action())}),i&&(0,ei.jsx)(Gn.Z,{children:t.map((e=>(0,u.createElement)(ci,{...e,key:e.id,command:()=>o(Pn.action(e.id)),actionButtomTitle:"Send invite to lesson"})))})]})})};var Ii,Di,zi=n(3811),ki=n(2419),Ei=n(225),Li=n(6720);const Ti=(0,Ei.Z)(zi.Z)(Ii||(Ii=(0,ni.Z)(["\n    border: 1px solid grey;\n    background-color: white;\n"]))),Ni=(0,Ei.Z)(Gn.Z)(Di||(Di=(0,ni.Z)(["\n    position: fixed;\n    bottom: ","px;\n    right: 50px;\n    z-index: 1200;\n"])),20+Li.xQ),Fi=e=>{let{onClick:t,...n}=e;return(0,ei.jsx)(Ni,{...n,children:(0,ei.jsx)(Ti,{onClick:t,children:(0,ei.jsx)(ki.Z,{fontSize:"large"})})})};const Hi=()=>{const e=(0,l.I0)();return(0,ei.jsx)(Fi,{onClick:()=>e(Ut.action())})};const Pi=()=>{const e=(0,l.I0)(),t=Qn(ie)===k.UN.finished;return(0,ei.jsx)(ei.Fragment,{children:t&&(0,ei.jsx)(Gn.Z,{width:"100%",display:"flex",justifyContent:"center",position:"absolute",bottom:"".concat(Li.xQ+16,"px"),children:(0,ei.jsx)(Jn.Z,{variant:"contained",color:"success",onClick:()=>e(Hn.action()),children:"Finalize"})})})};const Vi=()=>{const e=(0,l.I0)(),t=Qn(le),n=Qn(he);return(0,ei.jsx)(ei.Fragment,{children:t.length?(0,ei.jsx)(Gn.Z,{children:t.map((t=>(0,ei.jsx)(ci,{...t,command:()=>e(Nn.action(t.id)),actionButtomTitle:n?"Student Absant (remove)":""})))}):(0,ei.jsx)(ai.p,{mesage:"the Accepted list is empty"})})};var Oi=n(4111);const Yi=()=>{const e=(0,l.I0)(),t=Qn(ne);return(0,ei.jsx)(Oi.B,{type:t.status,scheduled:t.date,title:t.subject.name,onCancel:()=>e(Fn.action())})};var Ki;const Bi=(0,Ei.Z)(Gn.Z)(Ki||(Ki=(0,ni.Z)(["\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  height: 4rem;\n  width: 100%;\n  border-bottom: 1px solid grey;\n  margin-bottom: 1rem;\n  margin-top: 3rem;\n"]))),Wi=()=>{const e=(0,l.I0)(),t=Qn(S.P6),n=t===K.NZ.accepted,i=t===K.NZ.pending,o=t===K.NZ.declained;return(0,ei.jsxs)(Bi,{children:[(0,ei.jsx)(Ci.Vw,{type:Ci.L$.accepted,onClick:()=>e(Kt.action()),isActive:n,title:"Accepted"}),(0,ei.jsx)(Ci.Vw,{type:Ci.L$.pending,onClick:()=>e(Bt.action()),isActive:i,title:"Pending"}),(0,ei.jsx)(Ci.Vw,{type:Ci.L$.declained,onClick:()=>e(Wt.action()),isActive:o,title:"Declained"})]})},Ui=()=>{const e=(0,l.I0)(),t=Qn(ue),n=Qn(he);return(0,ei.jsx)(ei.Fragment,{children:t.length?(0,ei.jsx)(Gn.Z,{children:t.map((t=>(0,ei.jsx)(ci,{...t,command:()=>e(Vn.action(t.id)),actionButtomTitle:n?"Send another notification":""})))}):(0,ei.jsx)(ai.p,{mesage:"the Pending list is empty"})})};var $i=n(7678);const Qi=()=>{const e=Qn(S.P6),t=Qn(ge),n=Qn(ie),i=n===k.UN.done||n===k.UN.canceled,o=(0,l.I0)();return(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(Yi,{}),(0,ei.jsxs)($i.k,{onSwipeLeft:()=>{switch(e){case K.NZ.accepted:o(Bt.action());break;case K.NZ.pending:o(Wt.action());case K.NZ.declained:}},onSwipeRight:()=>{switch(e){case K.NZ.accepted:break;case K.NZ.pending:o(Kt.action());break;case K.NZ.declained:o(Bt.action())}},children:[t&&(0,ei.jsx)(Wi,{}),(0,ei.jsx)(Gn.Z,{marginTop:t?0:2,children:(0,ei.jsx)(_i,{})}),!i&&(0,ei.jsx)(Hi,{})]}),(0,ei.jsx)(Ai,{}),(0,ei.jsx)(Pi,{})]})},_i=()=>{const e=Qn(S.P6),t=Qn(ie),n=Qn(ge),i=e===K.NZ.accepted,o=e===K.NZ.pending,s=e===K.NZ.declained,a=t===k.UN.scheduled;return(0,ei.jsx)(ei.Fragment,{children:n?(0,ei.jsxs)(ei.Fragment,{children:[i&&(0,ei.jsx)(Vi,{}),o&&(0,ei.jsx)(Ui,{}),s&&(0,ei.jsx)(ri,{})]}):(0,ei.jsx)(ei.Fragment,{children:a?(0,ei.jsx)(Ui,{}):(0,ei.jsx)(Vi,{})})})};var Gi=n(4420),Xi=n(9365),qi=n(9407),Ji=n(1898),eo=n(3057),to=n(5209);const no={PaperProps:{style:{maxHeight:224,width:250}}},io=e=>{let{options:t,onChange:n,selected:i,...o}=e;const s=t.filter((e=>i.includes(e.id))),a=t.filter((e=>!i.includes(e.id))),c=s.map((e=>e.title)),[r,l]=(0,u.useState)(!1);return(0,u.useEffect)((()=>{a.length||l(!1)}),[a]),(0,ei.jsx)(Gn.Z,{...o,children:(0,ei.jsxs)(Ji.Z,{fullWidth:!0,children:[(0,ei.jsx)(Xi.Z,{id:"multiple-chip-label",children:"Subjects"}),(0,ei.jsx)(eo.Z,{labelId:"multiple-chip-label",id:"multiple-chip",multiple:!0,value:c,input:(0,ei.jsx)(Gi.Z,{id:"select-multiple-chip",label:"Subjects"}),renderValue:()=>(0,ei.jsx)(Gn.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:s&&s.map((e=>(0,ei.jsx)(to.Z,{label:e.title,onMouseDown:e=>{e.stopPropagation()},onDelete:()=>{n(e.id)}},e.id)))}),MenuProps:no,open:r,onOpen:()=>{a.length&&l(!0)},onClose:()=>l(!1),children:a.map((e=>(0,ei.jsx)(qi.Z,{value:e.title,onClick:()=>{n(e.id)},children:e.title},e.id)))})]})})};var oo=n(768),so=n(5017),ao=n(8254);const co=e=>{let{onChange:t,value:n,endAdornment:i,placeHolder:o,...s}=e;return(0,ei.jsx)(so.Z,{...s,fullWidth:!0,type:"number",placeholder:o,value:0===n?"":n,onChange:e=>{const n=parseInt(e.target.value);t(n<0||!n?0:n)},InputProps:{endAdornment:i&&(0,ei.jsx)(ao.Z,{position:"end",children:i})}})},ro=()=>{const e=(0,l.I0)(),t=Qn(S.Nh),n=Qn(Re),i=Qn(ze),o=Qn(Ae),s=Qn(Ie),a=Qn(De),c=Qn(Me),r=s===k.DK.unlimited,d=t?At.g.fillHeight:At.g.closed,u=[(0,ei.jsx)(Ci.Vw,{onClick:()=>e(qt.action()),type:Ci.L$.confirm},"confirm"),(0,ei.jsx)(Ci.Vw,{onClick:()=>e(Ft.action()),type:Ci.L$.cancel},"cancel")];return(0,ei.jsx)(ei.Fragment,{children:t&&(0,ei.jsx)(Si,{modalMode:d,onChangeModalMode:()=>e(Ot.action()),comandChilden:u,children:(0,ei.jsxs)(Gn.Z,{margin:2,children:[(0,ei.jsx)(io,{options:c,selected:a,onChange:t=>{const n=(o=t,(i=a).includes(o)?i.filter((e=>e!==o)):i.concat([o]));var i,o;e(wn.action(n))}}),(0,ei.jsx)(oo.P,{marginTop:2,marginBottom:2,onChange:t=>e(fn.action(t)),options:[{id:k.DK.limited,title:k.DK.limited},{id:k.DK.unlimited,title:k.DK.unlimited}],selected:r?k.DK.unlimited:k.DK.limited}),(0,ei.jsx)(Gn.Z,{marginBottom:2,children:r?(0,ei.jsx)(co,{onChange:t=>e(Rn.action(t)),placeHolder:"Limit time",value:i,endAdornment:"Month"}):(0,ei.jsx)(co,{onChange:t=>e(mn.action(t)),placeHolder:"Limit lessons",value:n,endAdornment:"Lessons"})}),(0,ei.jsx)(co,{onChange:t=>e(yn.action(t)),placeHolder:"placeHolder",value:o,endAdornment:"GEL"})]})})})};const lo=()=>{const e=(0,l.I0)();return(0,ei.jsx)(Fi,{onClick:()=>e(Nt.action())})};const uo=()=>{const e=(0,l.I0)();return(0,ei.jsx)(Fi,{onClick:()=>e(Tt.action())})};var ho=n(4825),go=n(3509),fo=n(5681),mo=n(8121);const yo=()=>{const e=(0,l.I0)(),t=Qn(_e),n=Qn($e);return(0,ei.jsx)(fo.t,{onClickOutside:()=>e(dn.action()),children:(0,ei.jsxs)(mo.h4,{children:[n?(0,ei.jsx)(Gn.Z,{width:"100%",overflow:"auto",height:"100%",children:(0,ei.jsx)(go.nv,{type:go.T3.header,text:t,onChange:t=>e(ln.action(t))})}):(0,ei.jsx)(qn.Z,{noWrap:!0,textOverflow:"ellipsis",overflow:"hidden",maxWidth:"17rem",onClick:()=>e(rn.action()),children:t||"click to add your name"}),(0,ei.jsx)(ho.J,{})]})})};var po=n(9276),jo=n(1508),xo=n(7585);const bo=e=>{let{name:t,rules:n,editCommand:i,deleteCommand:o}=e;const s=(0,xo.h)(n);return(0,ei.jsx)(oi.Z,{children:[(0,ei.jsx)(Oi.N,{children:t},"subjectName"),(0,ei.jsx)(si.S,{options:[{title:"Edit",command:i},{title:"Delete",command:o}]},"subjectMenu"),(0,ei.jsx)(Oi.N,{children:s},"subjectRulesInfo")],onClick:i})},Mo=()=>{const e=(0,l.I0)(),t=Qn(me);return(0,ei.jsx)(po.Z,{height:"100%",overflow:"auto",children:t.length?t.map((t=>(0,ei.jsx)(bo,{editCommand:()=>{e(tn.action(t.id))},deleteCommand:()=>{e(_t.action(t.id))},...t},t.id))):(0,ei.jsx)(jo.Z,{severity:"info",children:"Add your subject"})})};var So;const wo=(0,Ei.Z)(po.Z)(So||(So=(0,ni.Z)(["\n    display: flex;\n    height: 80;\n    align-items: center;\n    padding: 0.5rem;\n    justify-content: space-around;\n"]))),Co=()=>{const e=(0,l.I0)(),t=Qn(S.bJ),n=t===K.MB.subjects,i=t===K.MB.abonements;return(0,ei.jsxs)(wo,{children:[(0,ei.jsx)(Ci.Vw,{type:Ci.L$.abonements,onClick:()=>e(Et.action()),title:"abonements",isActive:i}),(0,ei.jsx)(Ci.Vw,{type:Ci.L$.subjects,onClick:()=>e(kt.action()),title:"subjects",isActive:n})]})};var vo=n(5678),Zo=n(5172),Ro=n(4299),Ao=n(15),Io=n(3794),Do=n(879);const zo=()=>{const e=Qn(je),t=Qn(xe),n=Qn(g.Y0),i=Qn(Ge),o=Qn(Qe),s=Qn(S.KD),a=Qn(Ro.v3),c=(0,l.I0)(),r=(0,u.useRef)(null),[d,h]=u.useState(!1);return(0,u.useEffect)((()=>{if(r.current){const e=r.current,t=e.scrollHeight;h(t>Ro.Hb),e.scrollTop=0}}),[i,s,o]),(0,ei.jsxs)(Do.Gt,{minHeight:Ro.QH+a,children:[(0,ei.jsxs)(Do.HI,{height:Ro.QH,children:[(0,ei.jsx)(Do.To,{children:(0,ei.jsx)(Ao.q,{image:n,size:Ro.bd,onClick:()=>{}})}),(0,ei.jsxs)(Do.To,{children:[(0,ei.jsx)(qn.Z,{textAlign:"center",children:e}),(0,ei.jsx)(qn.Z,{textAlign:"center",children:"Subjects"})]}),(0,ei.jsxs)(Do.To,{children:[(0,ei.jsx)(qn.Z,{textAlign:"center",children:t}),(0,ei.jsx)(qn.Z,{textAlign:"center",children:"Abonements"})]})]}),(0,ei.jsx)(fo.t,{onClickOutside:()=>c(gn.action()),children:(0,ei.jsx)(Do.NF,{ref:r,height:a,maxHeight:a,overflow:s?"auto":"hidden",onClick:()=>c(un.action()),children:o?(0,ei.jsx)(go.nv,{type:go.T3.textArea,text:i,onChange:e=>c(hn.action(e))}):(0,ei.jsx)(qn.Z,{style:{wordWrap:"break-word"},gutterBottom:!0,onClick:()=>c(un.action()),children:i||"add your description"})})}),d&&!o&&(0,ei.jsx)(Io.A,{title:"See more",onClick:()=>c(Pt.action()),children:s?(0,ei.jsx)(vo.Z,{}):(0,ei.jsx)(Zo.Z,{})})]})};const ko=e=>{let{id:t,price:n,limitLessons:i,subjectsFormatted:o,editCommand:s,deleteCommand:a}=e;const c=i?"".concat(i," ").concat(i>1?"Lessons":"Lesson"):"";return(0,ei.jsx)(oi.Z,{children:[(0,ei.jsx)(Oi.N,{children:o},"".concat(t,"_subjectsFormatted")),(0,ei.jsx)(si.S,{options:[{title:"Edit",command:s},{title:"Delete",command:a}]},"".concat(t,"_menu")),(0,ei.jsx)(qn.Z,{children:n},"".concat(t,"_price")),(0,ei.jsx)(qn.Z,{children:c},"".concat(t,"_limitLessons"))],onClick:s},t)},Eo=()=>{const e=(0,l.I0)(),t=Qn(ye),n=Qn(be);return(0,ei.jsx)(Gn.Z,{height:"100%",overflow:"auto",children:t.length?t.map((t=>(0,u.createElement)(ko,{...t,key:t.id,subjectsFormatted:n.get(t.id)||"",editCommand:()=>e(nn.action(t.id)),deleteCommand:()=>e(Gt.action(t.id))}))):(0,ei.jsx)(jo.Z,{severity:"info",children:"Add your abonement offer"})})},Lo=()=>{const e=(0,l.I0)();return(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(yo,{}),(0,ei.jsxs)($i.k,{onSwipeLeft:()=>e(kt.action()),onSwipeRight:()=>e(Et.action()),children:[(0,ei.jsx)(zo,{}),(0,ei.jsx)(Co,{}),(0,ei.jsx)(To,{})]})]})},To=()=>{switch(Qn(S.bJ)){case K.MB.subjects:return(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(Mo,{}),(0,ei.jsx)(uo,{})]});case K.MB.abonements:return(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(Eo,{}),(0,ei.jsx)(lo,{}),(0,ei.jsx)(ro,{})]});default:return(0,ei.jsx)(ei.Fragment,{})}};var No=n(9972),Fo=n(7892),Ho=n.n(Fo),Po=n(1652),Vo=n(7792),Oo=n(2504),Yo=n(5447);let Ko=function(e){return e.DateTime="DateTime",e.Time="Time",e}({});const Bo=e=>{let{type:t,onChange:n,currentDate:i,placeHolder:o,...s}=e;const a=t===Ko.Time,c=i?Ho()(i):void 0;return(0,ei.jsx)(Gn.Z,{...s,marginTop:2,marginBottom:2,children:(0,ei.jsx)(Po._,{dateAdapter:Vo.y,children:a?(0,ei.jsx)(Oo.d,{value:c,onChange:e=>{e&&n(e.toDate())},label:o}):(0,ei.jsx)(Yo.W,{value:c,onChange:e=>{e&&n(e.toDate())},label:o})})})};var Wo=n(6582);const Uo=e=>{let{checked:t,onChange:n,...i}=e;return(0,ei.jsx)(Wo.Z,{variant:"outlined",fullWidth:!0,children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(((e,i)=>{const o=t.includes(i);return(0,ei.jsx)(Jn.Z,{onClick:()=>n(i),variant:o?"contained":"outlined",children:e},e)}))})},$o=()=>{const e=Qn(S.jr),t=Qn(S.Uz),n=(0,l.I0)(),i=Qn(Ne),o=Qn(Le),s=Qn(Te),a=Qn(Ee),c=o===k.wy.manualDate,r=c?new Date(i[0]):new Date,d=c?r:(0,No.b)(r,s),u=[(0,ei.jsx)(Ci.Vw,{onClick:()=>{n(en.action())},type:Ci.L$.confirm},"confirmSavingRule"),(0,ei.jsx)(Ci.Vw,{onClick:()=>n(Yt.action()),type:Ci.L$.cancel},"cancelModifyRule")];return(0,ei.jsx)(ei.Fragment,{children:e&&(0,ei.jsx)(Si,{comandChilden:u,modalMode:e?t:At.g.closed,onChangeModalMode:()=>n(Ot.action()),resizable:!0,children:(0,ei.jsxs)(Gn.Z,{margin:2,children:[(0,ei.jsx)(oo.P,{marginBottom:2,onChange:e=>n(jn.action(e)),options:[{id:k.wy.manualDate,title:k.wy.manualDate},{id:k.wy.weekly,title:k.wy.weekly}],selected:c?k.wy.manualDate:k.wy.weekly}),(0,ei.jsx)(Gn.Z,{children:c?(0,ei.jsx)(Bo,{currentDate:d,type:Ko.DateTime,onChange:e=>{n(Sn.action(e.getTime())),n(bn.action(e))}}):(0,ei.jsxs)(Gn.Z,{children:[(0,ei.jsx)(Uo,{onChange:e=>n(xn.action(e)),checked:i}),(0,ei.jsx)(Bo,{currentDate:d,type:Ko.Time,onChange:e=>n(bn.action(e))})]})}),(0,ei.jsx)(co,{onChange:e=>n(Mn.action(e)),placeHolder:"Duration",value:a,endAdornment:"min"})]})})})};let Qo=function(e){return e.startCreatingRule="startCreatingRule",e}({});const _o=()=>{const e=(0,l.I0)();return(0,ei.jsx)(Fi,{className:Qo.startCreatingRule,onClick:()=>e(Vt.action())})};var Go=n(3050);const Xo=()=>{const e=Qn(Je),t=Qn(S.VI),n=Qn(S.MO),i=Qn(S.iX),o=(0,l.I0)();return(0,ei.jsx)(Gn.Z,{flexGrow:1,overflow:"auto",height:i?"100%":"60%",children:(0,ei.jsx)(Go.f,{lessons:e,onLessonClick:e=>{o(Tn.action(e))},representationType:n,startDate:t,onChengeDateBackward:()=>o(Un.action()),onChengeDateForward:()=>o(Wn.action()),onToday:()=>o(Bn.action())})})};var qo;const Jo=(0,Ei.Z)(Gn.Z)(qo||(qo=(0,ni.Z)(["\n  padding: 0 1rem;\n  box-sizing: content-box;\n  left: 0;\n"]))),es=()=>{const e=(0,u.useRef)(null),[t,n]=u.useState(!1),i=Qn(Ke),o=Qn(Oe),s=Qn(S.iX),a=Qn(Ro.zo),c=(0,l.I0)();return(0,u.useEffect)((()=>{if(e.current){const t=e.current,i=t.scrollHeight;n(i>Ro.Hb),t.scrollTop=0}}),[i,s,o]),(0,ei.jsxs)(Gn.Z,{className:Ro._j,children:[(0,ei.jsx)(fo.t,{onClickOutside:()=>c(Zn.action()),children:(0,ei.jsx)(Jo,{ref:e,minHeight:60,maxHeight:a,overflow:s?"auto":"hidden",children:o?(0,ei.jsx)(go.nv,{type:go.T3.textArea,text:i,onChange:e=>c(pn.action(e))}):(0,ei.jsx)(qn.Z,{style:{wordWrap:"break-word"},gutterBottom:!0,onClick:()=>c(vn.action()),children:i||"add description your subject"})})}),t&&!o&&(0,ei.jsx)(Gn.Z,{className:"show-more-wrapper",display:"flex",justifyContent:"center",children:(0,ei.jsx)(Io.A,{title:"See more",onClick:()=>c(Ht.action()),children:s?(0,ei.jsx)(vo.Z,{}):(0,ei.jsx)(Zo.Z,{})})})]})};var ts=n(7431);const ns=()=>{const e=(0,l.I0)(),t=Qn(Ye),n=Qn(Ve);return(0,ei.jsx)(fo.t,{onClickOutside:()=>{n&&e(cn.action())},children:(0,ei.jsxs)(mo.h4,{children:[(0,ei.jsx)(ts.h,{type:Ci.L$.cancel,onClick:()=>e(Lt.action())}),n?(0,ei.jsx)(Gn.Z,{width:"100%",overflow:"auto",height:"100%",children:(0,ei.jsx)(go.nv,{type:go.T3.header,text:t,onChange:t=>e(an.action(t))})}):(0,ei.jsx)(qn.Z,{noWrap:!0,textOverflow:"ellipsis",overflow:"hidden",maxWidth:"17rem",onClick:()=>e(sn.action()),children:t||"add title your subject"}),(0,ei.jsx)(ts.h,{type:Ci.L$.confirm,onClick:()=>{e(Jt.action())}})]})})};var is=n(2916);const os=e=>{let{timeStart:t,durationMin:n,periodicity:i,editCommand:o,deleteCommand:s}=e;const a=(0,is.LA)(i),c=(0,is.dV)(i,t);return(0,ei.jsx)(oi.Z,{children:[(0,ei.jsx)(qn.Z,{noWrap:!0,textOverflow:"ellipsis",overflow:"hidden",maxWidth:"17rem",children:a},"ruleText"),(0,ei.jsx)(si.S,{options:[{title:"Edit",command:o},{title:"Delete",command:s}]},"menu"),(0,ei.jsx)(qn.Z,{children:"".concat(n," min")},"duration"),(0,ei.jsx)(qn.Z,{children:c},"timeStart")],onClick:o})},ss=()=>{const e=Qn(qe),t=(0,l.I0)();return(0,ei.jsx)(Gn.Z,{flexGrow:1,overflow:"auto",children:e.length?e.map((e=>(0,ei.jsx)(os,{editCommand:()=>t(on.action(e.id)),deleteCommand:()=>t(Xt.action(e.id)),...e},e.id))):(0,ei.jsx)(jo.Z,{severity:"info",children:"No rules"})})},as=()=>{const e=Qn(ot),t=Qn(st),n=Qn(S.VI),i=Qn(S.MO),o=(0,l.I0)();return(0,ei.jsx)(Gn.Z,{className:"rule-preview-calendar",position:"absolute",top:0,height:"50%",width:"100%",zIndex:1300,bgcolor:"#fff",overflow:"auto",children:(0,ei.jsx)(Go.f,{lessons:e,representationType:i,onLessonClick:()=>{},warningOnOverlapingEvents:t,startDate:n,onChengeDateBackward:()=>o(Un.action()),onChengeDateForward:()=>o(Wn.action()),onToday:()=>o(Bn.action())})})};var cs;const rs=()=>{const e=Qn(S.jr),t=Qn(S.Uz),n=Qn(S.iX),i=t===At.g.halfHeight,o=e&&i,[s,a]=u.useState(300),c="calc(100% - ".concat(s,"px)"),r=(0,u.useRef)(null);(0,u.useEffect)((()=>{if(r.current){const e=r.current.clientHeight+50;e!==s&&a(e)}}),[s]);const l=(0,Ei.Z)(Gn.Z)(cs||(cs=(0,ni.Z)(["\n    display: flex;\n    flex-grow: 1;\n    flex-direction: column;\n    overflow: auto;\n  "])));return(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(ns,{}),(0,ei.jsxs)($i.k,{onSwipeLeft:()=>console.log("swipeLeft"),onSwipeRight:()=>console.log("swipeRight"),children:[(0,ei.jsx)(l,{height:"100%",children:!e&&(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(Gn.Z,{ref:r,children:(0,ei.jsx)(es,{})}),(0,ei.jsxs)(l,{height:c,children:[(0,ei.jsx)(Xo,{}),!n&&(0,ei.jsx)(ss,{})]})]})}),(0,ei.jsx)(_o,{})]}),o&&(0,ei.jsx)(as,{}),(0,ei.jsx)($o,{})]})};let ls=function(e){return e.navigateSchedule="navigateSchedule",e.navigateSubjectList="navigateSubjectList",e}({});const ds=()=>{const e=(0,l.I0)(),t=Qn(g.Y0),n=Qn(S.Nb),i=n===K.xF.schedule,o=n===K.xF.subjectList;return(0,ei.jsxs)(Li.$_,{children:[(0,ei.jsx)(Ci.Vw,{className:ls.navigateSchedule,type:Ci.L$.schedule,onClick:()=>e(Dt.action()),isActive:i}),(0,ei.jsx)(Ci.Vw,{className:ls.navigateSubjectList,type:Ci.L$.avatar,onClick:()=>e(zt.action()),isActive:o,image:t})]})};const us=()=>{const e=Qn(te),t=Qn(S.MO),n=Qn(S.VI),i=(0,l.I0)();return(0,ei.jsx)(Go.f,{lessons:e,onLessonClick:e=>{i(Tn.action(e))},representationType:t,startDate:n,onChengeDateBackward:()=>i(Un.action()),onChengeDateForward:()=>i(Wn.action()),onToday:()=>i(Bn.action())})};var hs=n(666);const gs=()=>{const e=(0,l.I0)(),t=[{id:K.QW.schedule,title:"Schedule"},{id:K.QW.calendarWeek,title:"Week"}],n=Qn(S.IQ);return(0,ei.jsxs)(mo.h4,{children:[(0,ei.jsx)(hs.G,{options:t,title:"Abonement",currentOption:n,onChange:t=>{const n=t;e(It.action(n))}}),(0,ei.jsx)(ho.J,{})]})},fs=()=>{const e=(0,l.I0)();return(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(gs,{}),(0,ei.jsx)($i.k,{onSwipeRight:()=>e(Dt.action()),onSwipeLeft:()=>e(zt.action()),children:(0,ei.jsx)(us,{})})]})},ms=()=>(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(ps,{}),(0,ei.jsx)(ds,{})]}),ys=()=>{const e=(0,l.I0)();(0,u.useEffect)((()=>{const t=(0,d.Aj)(h.I8,(n=>(n&&e(x.action(n)),e(Qt.action()),()=>t())))}),[e]);const t=Qn(g.Zw);return(0,ei.jsx)(ei.Fragment,{children:t?(0,ei.jsx)(ms,{}):(0,ei.jsx)(ti,{})})},ps=()=>{switch(Qn(S.Nb)){case K.xF.schedule:return(0,ei.jsx)(fs,{});case K.xF.subjectList:return(0,ei.jsx)(Lo,{});case K.xF.subjectPage:return(0,ei.jsx)(rs,{});case K.xF.lessonPage:return(0,ei.jsx)(Qi,{});default:return(0,ei.jsx)(ei.Fragment,{})}},js=()=>(0,ei.jsx)(l.zt,{store:_n,children:(0,ei.jsx)(ys,{})})}}]);
//# sourceMappingURL=40.d6dc8aac.chunk.js.map