"use strict";(self.webpackChunkabonement_front=self.webpackChunkabonement_front||[]).push([[0],{3608:(e,t,n)=>{n.d(t,{IM:()=>y,Tr:()=>x,bH:()=>w});var r=n(1501),a=n(7799),i=(n(2312),n(947));function o(e){const t=e.charAt(e.length-1).charCodeAt(0),n=String.fromCharCode(t+1);return e.slice(0,e.length-1)+n}const s=async e=>{const t=(0,a.IO)(e,(0,a.b9)(200)),n=await(0,a.PL)(t),r=[];return n.docs.forEach(((e,t)=>{const n=d(e);r.push(n)})),r},c=async function(e){let{ids:t,startDate:n,search:r,endDate:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.ouwner,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",h=(0,a.IO)(e);if(d&&u&&(h=(0,a.IO)(h,(0,a.ar)(d,"==",u))),t&&0===t.length)return[];t&&t.length&&(h=(0,a.IO)(h,(0,a.ar)((0,a.Jm)(),"in",t))),n&&c&&(h=(0,a.IO)(h,(0,a.ar)("date",">=",n)),h=(0,a.IO)(h,(0,a.ar)("date","<=",c)));let p=[];if(r&&(p=i.HO.map((e=>{const t=o(r);return(0,a.IO)(h,(0,a.ar)(e,">=",r),(0,a.ar)(e,"<",t))}))),p.length){const e=await Promise.all(p.map((e=>s(e))));return Array.from(new Set(e.flat().map((e=>JSON.stringify(e))))).map((e=>JSON.parse(e)))}return await s(h)},d=e=>{const t=e.data();return{id:e.id,...t}};let l=function(e){return e.teacherId="teacherId",e.studentId="studentId",e.ouwner="id",e}({});const u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.ouwner;const r=(0,a.hJ)(e,t);return{create:async e=>(await(0,a.ET)(r,e)).id,update:async n=>{let{id:r,...i}=n;const o=(0,a.JU)(e,t,r);await(0,a.pl)(o,i)},delete:async n=>{const r=(0,a.JU)(e,t,n);await(0,a.oe)(r)},list:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=await c(r,t,n,e);return a},single:async n=>{const r=(0,a.JU)(e,t,n);return{...(await(0,a.QT)(r)).data(),id:n}}}};var h=n(3309);let p=function(e){return e.production="",e.dev="dev_",e.test="test_",e}({}),m=function(e){return e.teacher="teacher",e.student="student",e.subject="subject",e.rules="rules",e.abonementOffer="abonementOffer",e.studentAbonements="studentAbonements",e.users="users",e.lessons="lessons",e.notifications="notifications",e.abonementConsumable="abonementConsumable",e}({});const f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return{teacherAPIHandeler:n(e,"".concat(t).concat(m.teacher),l.ouwner),studentAPIHandeler:n(e,"".concat(t).concat(m.student),l.ouwner),subjectApiHandeler:n(e,"".concat(t).concat(m.subject),l.teacherId),rulesApiHandeler:n(e,"".concat(t).concat(m.rules),l.teacherId),abonementOffer:n(e,"".concat(t).concat(m.abonementOffer),l.teacherId),userAPIHandeler:n(e,"".concat(t).concat(m.users),l.teacherId),lessonAPIHandeler:n(e,"".concat(t).concat(m.lessons),l.teacherId),abonementConsumable:n(e,"".concat(t).concat(m.abonementConsumable),l.studentId)}},g=(f(h.Fs,p.production),f(h.Fs,p.dev)),y=(f(h.Fs,p.test),g),x=async e=>{const t=await y.subjectApiHandeler.single(e);if(t.id){const e=t.rules,n=(await y.rulesApiHandeler.list("",{ids:e})).map(r.WE);return{...t,rules:n}}return{id:"",name:"",description:"",rules:[],teacherId:""}},w=async e=>{const t=await y.teacherAPIHandeler.single(e),{abonementOffers:n=[],subjects:a=[],...i}=t||{},o=await y.abonementOffer.list(e,{ids:n}),s=await y.subjectApiHandeler.list(e,{ids:a}),c=s.flatMap((e=>{let{rules:t}=e;return t})),d=await y.rulesApiHandeler.list(e,{ids:c}),l=s.map((e=>{const t=e.rules.map((e=>d.find((t=>{let{id:n}=t;return n===e})))),n=t.filter((e=>!!e)).map(r.WE);return{...e,rules:n}}));return{...i,abonementOffers:o,subjects:l}}},3309:(e,t,n)=>{n.d(t,{Fs:()=>s,I8:()=>l,M3:()=>d,qV:()=>c});var r=n(4702),a=n(7799),i=n(7593);const o=(0,r.ZF)({apiKey:"AIzaSyBukxDcZuMixceGjludm13n-m8q0A_Yrkk",authDomain:"abonement-58b38.firebaseapp.com",projectId:"abonement-58b38",storageBucket:"abonement-58b38.appspot.com",messagingSenderId:"932261391054",appId:"1:932261391054:web:67438e41441d2f23c97e9f",measurementId:"G-RXMGLTLS3W"}),s=(0,a.ad)(o),c=new i.hJ,d=new i._O,l=(0,i.v0)()},1964:(e,t,n)=>{n.r(t),n.d(t,{checkNotificationsPermissionCommand:()=>l,signOutCommand:()=>d});var r=n(7593),a=n(7780),i=n(3309),o=n(9438),s=n(5224),c=n(9492);const d=(0,s.f)("signOut",(function*(){yield(0,a.RE)(r.w7,i.I8),yield(0,a.gz)(o.B.actions.resetUserProfileState())})),l=(0,s.f)("checkNotificationsPermission",(function*(){const e=yield(0,a.RE)(c.Z);yield(0,a.gz)(o.B.actions.setNotificationsToken(e))}))},126:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(5224),a=n(7593),i=n(7780),o=n(9438),s=n(2731);const c=function*(e,t){yield(0,i.RE)(a.rh,e,t)};var d=n(3309),l=n(1879);const u=(e,t)=>({alreadyAuthenticatedUser:(0,r.f)("alreadyAuthenticatedUser",(function(t){let{payload:n}=t;return function*(){console.log("alreadyAuthenticatedUser",n),yield function*(e){const t=(0,s.d)(e.providerData[0]);yield(0,i.gz)(o.B.actions.setUserProfileState(t))}(n),yield e(n)}()})),authenticateWithFirebase:(0,r.f)("authenticateWithFirebase",(function*(){console.log("authenticateWithFirebase"),yield c(d.I8,d.qV);const e=yield(0,i.Ys)(l.d);yield t(e)})),authenticateFacebook:(0,r.f)("authenticateWithFacebook",(function*(){yield c(d.I8,d.M3);const e=yield(0,i.Ys)(l.d);yield t(e)}))})},7678:(e,t,n)=>{n.d(t,{k:()=>h});var r=n(168),a=n(225),i=n(6720),o=n(8121),s=n(228),c=n(2791),d=n(3892),l=n(184);var u;const h=(0,a.Z)((e=>{let{children:t,onSwipeLeft:n,onSwipeRight:r,onSwipeUp:a,onSwipeDown:i,...o}=e;const[u,h]=(0,c.useState)(null),p=(0,d.QS)({onSwiped:e=>{switch(e.dir){case"Left":n();break;case"Right":r();break;case"Up":null===a||void 0===a||a();break;case"Down":null===i||void 0===i||i()}}});return(0,l.jsx)(s.Z,{...p,...o,onMouseDown:e=>{h({x:e.clientX,y:e.clientY})},onMouseUp:e=>{if(u){const t=e.clientX-u.x,o=e.clientY-u.y;Math.abs(t)>Math.abs(o)?t>0?r():n():o>0?null===i||void 0===i||i():null===a||void 0===a||a(),h(null)}},children:t})}))(u||(u=(0,r.Z)(["\n    position: absolute;\n    top: ","px;\n    left: 0;\n    height: calc(100% - ","px);\n    width: 100%;\n    overflow: auto;\n    display: flex;\n    flex-direction: column;\n    flex-grow: 1;        \n"])),o.J9,o.J9+i.xQ)},15:(e,t,n)=>{n.d(t,{q:()=>i});var r=n(3978),a=(n(2791),n(184));const i=e=>{let{image:t,size:n,...i}=e;return(0,a.jsx)(r.Z,{sx:{width:n,height:n},src:t,...i})}},3050:(e,t,n)=>{n.d(t,{f:()=>j,A$:()=>Z,So:()=>v});var r=n(2791),a=n(575),i=n(8217),o=n(2720),s=n(4332),c=n(9704),d=n(2312),l=n(228),u=n(5728);var h=n(1482),p=n(5953),m=n(3811),f=n(4565),g=n(7494),y=n(224),x=n(5299),w=n(184);const b=e=>{let{startDate:t,onChengeDateForward:n,onChengeDateBackward:r,onToday:a}=e;return(0,w.jsxs)(p.ZP,{container:!0,spacing:3,alignItems:"center",justifyContent:"space-around",children:[(0,w.jsxs)(p.ZP,{item:!0,children:[(0,w.jsx)(m.Z,{color:"primary",onClick:r,children:(0,w.jsx)(x.Z,{})}),(0,w.jsx)(m.Z,{color:"primary",sx:{mx:1},onClick:a,children:(0,w.jsx)(g.Z,{})}),(0,w.jsx)(m.Z,{color:"primary",onClick:n,children:(0,w.jsx)(y.Z,{})})]}),(0,w.jsx)(p.ZP,{item:!0,children:(0,w.jsx)(f.Z,{variant:"h6",color:"text.primary",children:(0,h.Z)(t,"dd MMMM yyyy")})})]})},Z={[d.UN.scheduled]:"#1661e4",[d.UN.commingSoon]:"#f3e817",[d.UN.inProcess]:"#e46116",[d.UN.finished]:"#3fca0d",[d.UN.done]:"#16e438",[d.UN.canceled]:"#e80f0f",[d.He.outerSchedule]:"#1661e4",[d.He.thisSubjectSchedule]:"#3fca0d",[d.He.editingRuleSchedule]:"#e46116"};let v=function(e){return e.timeGridWeek="timeGridWeek",e.listWeek="listWeek",e}({});const j=e=>{var t;let{lessons:n,representationType:d,onLessonClick:h,warningOnOverlapingEvents:p,startDate:m,onChengeDateForward:f,onChengeDateBackward:g,onToday:y,...x}=e;const v=(0,r.useRef)(null),j=null===(t=v.current)||void 0===t?void 0:t.getApi(),S=!!j;(0,r.useEffect)((()=>{S&&j.changeView(d)}),[d,S,j]),(0,r.useEffect)((()=>{if(S){j.getDate().getTime()!==m.getTime()&&j.gotoDate(m)}}),[m,S,j]);const k=((e,t)=>e.map((e=>{const n=Z[t||e.status],r=e.date,a=r.getMinutes(),i=new Date(r);return i.setMinutes(a+e.durationMin),{id:e.id,title:e.subject.name,start:r,end:i,color:n}})))(n);return(0,w.jsxs)(l.Z,{...x,flexGrow:1,overflow:"auto",children:[p&&(0,w.jsx)(u.p,{mesage:"you can't be in two places at the same time, clarify your plans"}),(0,w.jsx)(b,{startDate:m,onChengeDateBackward:()=>{const e=v.current;if(e){e.getApi().prev(),g()}},onChengeDateForward:()=>{const e=v.current;if(e){e.getApi().next(),f()}},onToday:()=>{const e=v.current;if(e){e.getApi().today(),y()}}}),(0,w.jsx)(a.Z,{contentHeight:"auto",ref:v,dayHeaderFormat:{weekday:"short",day:"numeric"},titleFormat:{month:"short",day:"numeric"},initialDate:m,headerToolbar:!1,slotMinTime:"07:00:00",slotMaxTime:"24:00:00",initialView:d,eventClick:e=>{const t=e.event.id;h(t)},eventResizableFromStart:!0,events:k,plugins:[i.Z,o.Z,s.ZP,c.Z]})]})}},6931:(e,t,n)=>{n.d(t,{Z:()=>h});var r,a,i=n(168),o=n(8928),s=n(228),c=(n(2791),n(225)),d=n(184);const l=(0,c.Z)(o.Z)(r||(r=(0,i.Z)(["\n  padding: 0 16px 0 16px;\n  height: 85px;\n  align-items: center;\n  margin-bottom: 10px ;\n  display: flex;\n  flex-direction: column;\n"]))),u=(0,c.Z)(s.Z)(a||(a=(0,i.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),h=e=>{let{children:t,onClick:n,...r}=e;const[a,i,o,c]=t,h=a||i,p=o||c,m=!(h&&p),f=!a&&i,g=!o&&c;return(0,d.jsxs)(l,{...r,sx:{justifyContent:m?"center":"space-between"},onClick:n,children:[h&&(0,d.jsxs)(u,{flexDirection:f?"row-reverse":{},children:[a&&(0,d.jsx)(s.Z,{children:a}),i&&(0,d.jsx)(s.Z,{children:i})]}),p&&(0,d.jsxs)(u,{flexDirection:g?"row-reverse":{},children:[o&&(0,d.jsx)(s.Z,{children:o}),c&&(0,d.jsx)(s.Z,{children:c})]})]})}},5681:(e,t,n)=>{n.d(t,{t:()=>o});var r=n(2791),a=n(228);var i=n(184);const o=e=>{let{children:t,onClickOutside:n}=e;const{ref:o,handleInternalClick:s}=(e=>{const t=r.useRef(null),[n,a]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const r=r=>{!t.current||t.current.contains(r.target)||n||e&&e(),a(!1)};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}}),[e,n]),{ref:t,handleInternalClick:()=>{a(!0)}}})(n);return(0,i.jsx)(a.Z,{ref:o,onClick:s,children:t})}},666:(e,t,n)=>{n.d(t,{G:()=>u});var r=n(2791),a=n(1091),i=n(2352),o=n(9407),s=n(5172),c=(n(2312),n(228)),d=n(4565),l=n(184);const u=e=>{let{title:t,options:n,currentOption:u,onChange:h,...p}=e;const[m,f]=r.useState(null),g=Boolean(m),y=()=>{f(null)};return(0,l.jsxs)(c.Z,{...p,children:[(0,l.jsx)(a.Z,{id:"menu-button","aria-controls":g?"drop-down-menu":void 0,"aria-haspopup":"true","aria-expanded":g?"true":void 0,variant:"text",disableElevation:!0,onClick:e=>{f(e.currentTarget)},endIcon:(0,l.jsx)(s.Z,{color:"disabled"}),children:(0,l.jsx)(d.Z,{color:"#000",variant:"body2",textTransform:"none",children:t})}),(0,l.jsx)(i.Z,{id:"drop-down-menu",MenuListProps:{"aria-labelledby":"menu-button"},anchorEl:m,open:g,onClose:y,sx:{padding:"0px"},children:!!n&&n.map((e=>{const t=u===e.id;return(0,l.jsx)(o.Z,{selected:t,onClick:()=>{h(e.id),y()},dense:!0,children:e.title},e.id)}))})]})}},6720:(e,t,n)=>{n.d(t,{$_:()=>l,xQ:()=>c});var r,a=n(168),i=n(225),o=n(8928),s=(n(2791),n(184));const c=76,d=(0,i.Z)(o.Z)(r||(r=(0,a.Z)(["\n  height: ","px;\n  width: 100%;\n  box-sizing: border-box;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  justify-content: space-between;\n  padding: 1rem;\n  align-items: center;\n  display: flex;\n"])),c),l=e=>{let{children:t,...n}=e;return(0,s.jsx)(d,{...n,elevation:3,children:t})}},8121:(e,t,n)=>{n.d(t,{J9:()=>c,h4:()=>l});var r,a=n(168),i=n(225),o=n(8928),s=(n(2791),n(184));const c=60,d=(0,i.Z)(o.Z)(r||(r=(0,a.Z)(["\n  height: ","px;\n  width: 100%;\n  box-sizing: border-box;\n  position: fixed;\n  top: 0;\n  left: 0;\n  justify-content: space-between;\n  padding: 1rem;\n  align-items: center;\n  display: flex;\n"])),c),l=e=>{let{children:t,...n}=e;return(0,s.jsx)(d,{...n,children:t})}},7431:(e,t,n)=>{n.d(t,{h:()=>s});var r=n(3811),a=n(2791),i=n(5642),o=n(184);const s=e=>{let{onClick:t,type:n,disabled:s,...c}=e;const d=i.A5[n],l=a.useRef(null);return(0,o.jsx)(r.Z,{ref:l,onClick:e=>{e.stopPropagation(),l.current&&l.current.contains(e.target)&&t()},disabled:s,children:(0,o.jsx)(d,{})})}},3154:(e,t,n)=>{n.d(t,{S:()=>u});var r=n(228),a=n(3811),i=n(2352),o=n(9407),s=n(2791),c=n(2094),d=n(1903),l=n(184);const u=e=>{let{options:t,isFilter:n,...u}=e;const[h,p]=s.useState(null),m=Boolean(h),f=()=>{p(null)};return(0,l.jsxs)(r.Z,{...u,children:[(0,l.jsx)(a.Z,{id:"menu-IconButton","aria-controls":m?"IconButton-menu":void 0,"aria-haspopup":"true","aria-expanded":m?"true":void 0,onClick:e=>{e.stopPropagation(),p(e.currentTarget)},children:n?(0,l.jsx)(d.Z,{}):(0,l.jsx)(c.Z,{})}),(0,l.jsx)(i.Z,{id:"IconButton-menu",MenuListProps:{"aria-labelledby":"menu-IconButton"},anchorEl:h,open:m,onClose:f,sx:{padding:"0px"},children:!!t&&t.map((e=>(0,l.jsx)(o.Z,{onClick:t=>{e.command(),t.stopPropagation(),f()},dense:!0,children:e.title},e.title)))})]})}},5642:(e,t,n)=>{n.d(t,{A5:()=>M,L$:()=>S,Vw:()=>I});var r,a=n(168),i=(n(2791),n(9394)),o=n(6909),s=n(772),c=n(4967),d=n(8e3),l=n(1961),u=n(3368),h=n(5130),p=n(2094),m=n(8128),f=n(3978),g=n(228),y=n(3811),x=n(4565),w=n(225),b=n(5403),Z=n(5860),v=n(260),j=n(184);let S=function(e){return e.schedule="schedule",e.avatar="avatar",e.subjects="subjects",e.abonements="abonements",e.accepted="accepted",e.pending="pending",e.declained="declained",e.cancel="cancel",e.confirm="confirm",e.more="more",e.notifications="notifications",e.search="search",e.info="info",e.arrowBack="arrowBack",e}({});const k=(0,w.Z)(f.Z)(r||(r=(0,a.Z)(["\n  width: 100%;\n  height: 100%;\n"]))),M={[S.schedule]:s.Z,[S.avatar]:e=>{let{image:t,...n}=e;return(0,j.jsx)(g.Z,{padding:"1px",width:"24px",height:"24px",borderRadius:"50%",...n,children:(0,j.jsx)(k,{src:t})})},[S.subjects]:c.Z,[S.abonements]:d.Z,[S.accepted]:l.Z,[S.pending]:o.Z,[S.declained]:u.Z,[S.cancel]:h.Z,[S.confirm]:i.Z,[S.more]:p.Z,[S.notifications]:m.Z,[S.search]:b.Z,[S.info]:Z.Z,[S.arrowBack]:v.Z},C={borderBottom:"3px solid #9c27b0"},D={border:"2px solid #9c27b0"},I=e=>{let{isActive:t,onClick:n,type:r,title:a,image:i,...o}=e;const s=M[r];return(0,j.jsx)(y.Z,{...o,onClick:n,children:r!==S.avatar?(0,j.jsxs)(g.Z,{display:"block",sx:t?C:{},children:[(0,j.jsx)(s,{color:t?"secondary":"disabled"}),!!a&&(0,j.jsx)(x.Z,{fontSize:"0.7rem",variant:"body2",marginTop:"-6px",color:t?"secondary":"disabled",children:a})]}):(0,j.jsx)(s,{color:t?"secondary":"disabled",sx:t?D:{},image:i})})}},4111:(e,t,n)=>{n.d(t,{B:()=>D,N:()=>M});var r=n(168),a=n(1508),i=n(8588),o=n(4565),s=(n(2791),n(2312)),c=n(417),d=n(6514),l=n(1911),u=n(2780),h=n(1428),p=n(9823),m=n(184);const f=e=>{let{status:t}=e;switch(t){case s.UN.scheduled:return(0,m.jsx)(c.Z,{fontSize:"large"});case s.UN.canceled:return(0,m.jsx)(p.Z,{fontSize:"large"});case s.UN.commingSoon:return(0,m.jsx)(d.Z,{fontSize:"large"});case s.UN.done:return(0,m.jsx)(h.Z,{fontSize:"large"});case s.UN.finished:return(0,m.jsx)(u.Z,{fontSize:"large"});case s.UN.inProcess:return(0,m.jsx)(l.Z,{color:"success",fontSize:"large"})}};var g=n(3154),y=n(1482),x=n(5129),w=n(3012),b=n(9860);const Z=(e,t)=>{switch(e){case s.UN.scheduled:return"Scheduled ".concat((0,y.Z)(t,"dd.MM.yyyy HH:mm"));case s.UN.canceled:return"Canceled";case s.UN.commingSoon:return"Comming Soon ".concat((e=>{const t=new Date,n=(0,w.Z)(t,e);return Math.abs(n)<24?"".concat((0,b.Z)(e,t,{addSuffix:!0})," at ").concat((0,y.Z)(e,"HH:mm")):"".concat((0,b.Z)(e,t,{addSuffix:!0}))})(t));case s.UN.done:return"Done";case s.UN.finished:return"Finished";case s.UN.inProcess:return"Started ".concat((0,x.Z)(t,new Date,{addSuffix:!0}))}};var v,j,S=n(8121),k=n(225);const M=(0,k.Z)(o.Z)(v||(v=(0,r.Z)(["\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  max-width: 17rem;\n"]))),C=(0,k.Z)(i.Z)(j||(j=(0,r.Z)(["\n  padding: 0;\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: ",";\n"])),S.J9),D=e=>{let{title:t,type:n,scheduled:r,onCancel:i,...o}=e;const c=(d=n)===s.UN.canceled?"error":d===s.UN.commingSoon?"warning":d===s.UN.scheduled?"info":"success";var d;const l=n===s.UN.scheduled||n===s.UN.commingSoon,u=Z(n,r),h=[{title:"Cancel",command:i}];return(0,m.jsx)(C,{...o,elevation:3,children:(0,m.jsxs)(a.Z,{sx:{alignItems:"center"},color:c,icon:(0,m.jsx)(f,{status:n}),action:l&&(0,m.jsx)(g.S,{options:h}),children:[(0,m.jsx)(M,{variant:"body1",fontWeight:"bold",children:t}),(0,m.jsx)(M,{variant:"body2",children:u})]})})}},879:(e,t,n)=>{n.d(t,{Gt:()=>l,HI:()=>u,NF:()=>p,To:()=>h});var r,a,i,o,s=n(168),c=n(225),d=n(228);const l=(0,c.Z)(d.Z)(r||(r=(0,s.Z)(["\n    display: flex;\n    flex-direction: column;\n"]))),u=(0,c.Z)(d.Z)(a||(a=(0,s.Z)(["\n    display: flex;\n    justify-content: center;\n    flex-direction: row;\n"]))),h=(0,c.Z)(d.Z)(i||(i=(0,s.Z)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 30%;\n"]))),p=(0,c.Z)(d.Z)(o||(o=(0,s.Z)(["\n    padding: 0 1rem;\n    box-sizing: content-box;\n    left: 0;\n"])))},401:(e,t,n)=>{n.d(t,{U:()=>y});var r,a,i,o=n(168),s=n(8928),c=n(1091),d=n(5017),l=n(4565),u=(n(2791),n(225)),h=(n(2312),n(768)),p=n(184);const m=(0,u.Z)(s.Z)(r||(r=(0,o.Z)(["\n  width: 100%;\n  height: 40px;\n  border-radius: 4px;\n  display: flex;\n  margin-bottom: 1rem;\n"]))),f=(0,u.Z)(c.Z)(a||(a=(0,o.Z)(["\n  border-radius: 0px 4px 4px 0px;\n  text-transform: none;\n  padding: 0 18px;\n"]))),g=(0,u.Z)(h.P)(i||(i=(0,o.Z)(["\n  .MuiSelect-select.MuiSelect-outlined.MuiInputBase-input.MuiOutlinedInput-input {\n    padding-top: 3px;\n    padding-bottom: 3px;\n  }\n  .MuiInputBase-root.MuiOutlinedInput-root.MuiInputBase-formControl {\n    height: 100%;\n    border-radius: 0;\n  }\n  .MuiFormControl-root {\n    height: 100%;\n  }\n"]))),y=e=>{let{text:t,onChangeSearch:n,onSearch:r,placeHolder:a,searchOptions:i,currentOption:o,onOptionChange:s,...c}=e;const u=i&&i.length>0;return(0,p.jsxs)(m,{...c,elevation:3,children:[(0,p.jsx)(d.Z,{variant:"standard",fullWidth:!0,type:"search",placeholder:a,onChange:e=>n(e.target.value),value:t,inputProps:{style:{padding:"9px"}}}),u&&(0,p.jsx)(g,{selected:o||"",options:i||[],onChange:s||(()=>{})}),(0,p.jsx)(f,{onClick:r,variant:"contained",children:(0,p.jsx)(l.Z,{children:"Search"})})]})}},768:(e,t,n)=>{n.d(t,{P:()=>c});n(2791),n(2312);var r=n(228),a=n(1898),i=n(3057),o=n(9407),s=n(184);const c=e=>{let{options:t,onChange:n,selected:c,...d}=e;return(0,s.jsx)(r.Z,{...d,children:(0,s.jsx)(a.Z,{sx:{minWidth:120},children:(0,s.jsx)(i.Z,{value:c,onChange:e=>{n(e.target.value)},children:t&&t.map((e=>(0,s.jsx)(o.Z,{value:e.id,children:e.title},e.id)))})})})}},3794:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(1091),a=(n(2791),n(184));const i=e=>{let{title:t,children:n,onClick:i,...o}=e;return(0,a.jsxs)(r.Z,{variant:"text",...o,onClick:i,children:[t,n]})}},3509:(e,t,n)=>{n.d(t,{T3:()=>d,nv:()=>m});var r,a=n(168),i=n(277),o=n(5017),s=n(228),c=(n(2791),n(184));let d=function(e){return e.textArea="textArea",e.header="header",e.modalControl="modalControl",e}({});const l={padding:"0",height:"100%",overflow:"auto"},u={padding:"0.5rem"},h={padding:"0"},p=(0,i.ZP)(o.Z)(r||(r=(0,a.Z)(["\n\n  & .MuiInputBase-root {\n    padding: 0.5rem;\n    height: 100%;\n  }\n"]))),m=e=>{let{...t}=e;return(0,c.jsx)(s.Z,{height:"100%",children:(0,c.jsx)(f,{...t})})},f=e=>{let{text:t,type:n,placeHolder:r,onChange:a,...i}=e;switch(n){case d.textArea:return(0,c.jsx)(p,{...i,fullWidth:!0,multiline:!0,variant:"outlined",placeholder:r,value:t,onChange:e=>a(e.target.value),inputProps:{style:l,row:1},sx:{height:"100%"},rows:6});case d.modalControl:return(0,c.jsx)(o.Z,{...i,fullWidth:!0,variant:"outlined",placeholder:r,value:t,onChange:e=>a(e.target.value),inputProps:{style:u}});case d.header:return(0,c.jsx)(s.Z,{margin:"0 0.5rem",children:(0,c.jsx)(o.Z,{...i,fullWidth:!0,variant:"standard",placeholder:r,value:t,onChange:e=>a(e.target.value),inputProps:{style:h}})})}}},5728:(e,t,n)=>{n.d(t,{p:()=>s});var r=n(1508),a=n(4565),i=(n(2791),n(7268)),o=n(184);const s=e=>{let{mesage:t,...n}=e;return(0,o.jsx)(r.Z,{sx:{alignItems:"center",margin:"0.25rem 0"},color:"warning",icon:(0,o.jsx)(i.Z,{fontSize:"large"}),children:(0,o.jsx)(a.Z,{variant:"h6",children:t})})}},9901:(e,t,n)=>{n.d(t,{g:()=>r,r:()=>a});let r=function(e){return e.closed="closed",e.fillHeight="fillHeight",e.halfHeight="halfHeight",e}({}),a=function(e){return e.left="left",e.right="right",e.top="top",e.bottom="bottom",e}({})},1879:(e,t,n)=>{n.d(t,{Y0:()=>s,Zw:()=>a,b1:()=>i,d:()=>r,p1:()=>o});const r=e=>e.userProfile,a=e=>!!r(e).id,i=e=>r(e).id,o=e=>r(e).photoURL||"",s=e=>r(e).photoURL||""},1816:(e,t,n)=>{n.d(t,{N:()=>a});var r=n(6382);const a=(e,t)=>{const n={data:e,fieldsEditing:{}};return(0,r.oM)({name:t,initialState:{...n},reducers:{setEditingResource:(e,t)=>{let{payload:n}=t;return{...e,data:{...e.data,...n}}},startEditingField:(e,t)=>{let{payload:n}=t;return{...e,fieldsEditing:{...e.fieldsEditing,[n]:!0}}},finishEditingField:(e,t)=>{let{payload:n}=t;return{...e,fieldsEditing:{...e.fieldsEditing,[n]:!1}}},reset:()=>({...n})}})}},5514:(e,t,n)=>{n.d(t,{k:()=>r});const r=(0,n(6382).oM)({name:"errorSlice",initialState:{},reducers:{setError:(e,t)=>{let{payload:{commandName:n,...r}}=t;return{...e,[n]:r}},clearError:(e,t)=>{let{payload:n}=t;return{...e,[n]:void 0}},resetErrors:()=>({})}})},947:(e,t,n)=>{n.d(t,{HO:()=>i,gH:()=>o});var r=n(6382);let a=function(e){return e.search="search",e.name="name",e.description="description",e}({});const i=[a.search,a.name,a.description],o=(e,t)=>{const n={data:[],filters:{search:""}};return(0,r.oM)({name:t,initialState:n,reducers:{setResourses:(e,t)=>{let{payload:n}=t;return{...e,data:[...n]}},setFilters:(e,t)=>{let{payload:n}=t;return{...e,filters:{...e.filters,...n}}},resetResources:()=>({...n})}})}},7977:(e,t,n)=>{n.d(t,{m:()=>r});const r=(0,n(6382).oM)({name:"loadingSlice",initialState:{},reducers:{setLoading:(e,t)=>{let{payload:n}=t;return{...e,[n]:!0}},unsetLoading:(e,t)=>{let{payload:n}=t;return{...e,[n]:!1}},resetLoading:()=>({})}})},9438:(e,t,n)=>{n.d(t,{B:()=>i});var r=n(6382);const a={id:"",displayName:"",email:"",photoURL:"",providerId:"",phoneNumber:"",notificationsToken:""},i=(0,r.oM)({name:"teacherModal",initialState:a,reducers:{setUserProfileState:(e,t)=>{let{payload:n}=t;return{...e,...n}},resetUserProfileState:()=>({...a}),setNotificationsToken:(e,t)=>{let{payload:n}=t;return{...e,notificationsToken:n}}}})},1501:(e,t,n)=>{n.d(t,{$O:()=>s,WE:()=>c});var r=n(6382);class a{constructor(e){this.historyArray=e,this.effectTypesToWatch=new Set(["PUT","CALL"])}effectTriggered(e){var t;this.effectTypesToWatch.has(null===(t=e.effect)||void 0===t?void 0:t.type)&&this.historyArray.push(e)}actionDispatched(e){this.historyArray.push(e)}}var i=n(5792);const o=(e,t)=>{const n=t.type,r=new Promise(((r,a)=>{const i=setTimeout((()=>{throw console.log(t),console.log({loading:e.getState().loading,error:e.getState().error,profile:e.getState().userProfile}),console.log("The action ".concat(n," took too much time to execute")),new Error("The action ".concat(n," took too much time to execute"))}),3e3);let o=!1;e.subscribe((()=>{const t=e.getState(),a=!!t.loading[n],s=!!t.error[n];a&&(o=!0),!1===a&&o&&(clearTimeout(i),r("")),s&&r("")}))}));return e.dispatch(t),r},s=(e,t)=>()=>{const n=[],s=new a(n),c=(0,i.ZP)({sagaMonitor:s}),d=(0,r.xC)({reducer:e,middleware:[c],devTools:!1});return c.run(t),{...d,asyncDispatch:e=>o(d,e),getActionHistory:()=>[...n],getActionHistoryRepresentation:()=>JSON.stringify(n,void 0,2)}},c=((0,r.PH)("setState"),(0,r.PH)("resetState"),e=>{const{timeStart:t,...n}=e;return{...n,timeStart:t.toDate()}})},2312:(e,t,n)=>{n.d(t,{DK:()=>r,He:()=>o,UN:()=>i,wy:()=>a});let r=function(e){return e.limited="limited",e.unlimited="unlimited",e}({}),a=function(e){return e.weekly="weekly",e.manualDate="manualDate",e}({}),i=function(e){return e.scheduled="scheduled",e.commingSoon="commingSoon",e.inProcess="inProcess",e.finished="finished",e.done="done",e.canceled="canceled",e}({}),o=function(e){return e.outerSchedule="outerSchedule",e.thisSubjectSchedule="thisSubjectSchedule",e.editingRuleSchedule="editingRuleSchedule",e}({})},9972:(e,t,n)=>{n.d(t,{b:()=>r});const r=(e,t)=>{const n=new Date(e),r=new Date(t),a=r.getHours(),i=r.getMinutes();return n.setHours(a),n.setMinutes(i),n}},9078:(e,t,n)=>{n.d(t,{Kj:()=>d,Xt:()=>s,oO:()=>o,t:()=>i});var r=n(2312),a=n(9972);const i=(e,t,n)=>e.map((e=>o(e,t,n))).flat(),o=(e,t,n)=>{const{rules:r}=e;return r.map((r=>s(e,r,t,n))).flat()},s=(e,t,n,i)=>{const{periodicity:o,durationMin:s,timeStart:d}=t,{periodicityType:l,periodicityRule:u}=o,h={...e,rules:[]};switch(l){case r.wy.manualDate:{const e=new Date(u[0]),t=(0,a.b)(e,d);return[c(h,t,s,n||r.UN.scheduled)]}case r.wy.weekly:{const e=u.map((e=>{const t=((e,t)=>{const n=t?new Date(t):new Date,r=e-n.getDay();return n.setDate(n.getDate()+r),n})(e,i),o=(0,a.b)(t,d);return c(h,o,s,n||r.UN.scheduled)}));return e}default:return[]}},c=(e,t,n,r)=>({id:"",durationMin:n,subject:e,date:t,accepted:[""],declained:[""],status:r,teacherId:e.teacherId,participants:[]}),d=(e,t)=>{const n=[...e,...t].sort(((e,t)=>e.date.getTime()-t.date.getTime()));for(let r=0;r<n.length-1;r++){const e=n[r],t=n[r+1],a=new Date(e.date);if(a.setMinutes(a.getMinutes()+e.durationMin),a>t.date)return!0}return!1}},5224:(e,t,n)=>{n.d(t,{f:()=>h,B:()=>p});var r=n(6382),a=n(7780),i=n(5514),o=n(7977);const{actions:{setError:s,clearError:c}}=i.k,{actions:{setLoading:d,unsetLoading:l}}=o.m;function*u(e,t){yield(0,a.Cs)((function*(){const n=function(e){return function*(t){const n=t.type;yield(0,a.gz)(d(n)),yield(0,a.gz)(c(n));try{yield e(t)}catch(r){yield(0,a.RE)(console.warn,r);const e=r;yield(0,a.gz)(s({commandName:n,error:r,message:null===e||void 0===e?void 0:e.message,thrown:new Date}))}finally{yield(0,a.gz)(l(n))}}}(t);yield(0,a.Fm)(e,n)}))}const h=(e,t)=>({action:(0,r.PH)("".concat("command/").concat(e)),saga:t});function p(e){return function*(){const t=Object.values(e).filter((e=>!!e.action&&!!e.saga)).map((e=>function*(e){yield u(e.action.type,e.saga)}(e)));yield(0,a.$6)(t)}}},7585:(e,t,n)=>{n.d(t,{h:()=>a});var r=n(2916);const a=e=>e.map((e=>{const t=(0,r.LA)(e.periodicity),n=(0,r.dV)(e.periodicity,e.timeStart);return"".concat(t," at ").concat(n)})).join(", ")},2916:(e,t,n)=>{n.d(t,{LA:()=>i,dV:()=>o});var r=n(2312);const a=e=>{switch(e){case 0:return"Monday";case 1:return"Tuesday";case 2:return"Wednesday";case 3:return"Thursday";case 4:return"Friday";case 5:return"Saturday";case 6:return"Sunday";default:return"Unknown day"}},i=e=>{const{periodicityType:t,periodicityRule:n}=e;if(!n.length)return"No periodicity";switch(t){case r.wy.weekly:return 7===n.length?"Every day":"On ".concat(n.map(a).join(", "));case r.wy.manualDate:const e=new Date(n[0]);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).format(e);default:return"Unknown periodicity"}},o=(e,t)=>{if(e.periodicityType===r.wy.manualDate)return(e=>{const t=new Date(e),n=t.getHours(),r=t.getMinutes(),a=n<10?"0".concat(n):"".concat(n),i=r<10?"0".concat(r):"".concat(r);return"".concat(a,":").concat(i)})(e.periodicityRule[0]);{const e=new Date(t),n=e.getMinutes(),r=e.getHours();return"".concat(r,":").concat(n<10?"0".concat(n):"".concat(n))}}},2731:(e,t,n)=>{n.d(t,{d:()=>r});const r=e=>{let{uid:t,...n}=e;return{notificationsToken:"",...n,id:t}}},9492:(e,t,n)=>{n.d(t,{L:()=>o,Z:()=>i});var r=n(4665);let a={};const i=async()=>await(0,r.LP)(a,{vapidKey:"BJk6KiXNo2Sr852NiIjfb-pcQwWLONzLeAdTHgSUFyO3NMm47pVsudbb9coGAYOQ5LmMe5bSj378J7bw-XD7O0k"}),o=()=>new Promise((e=>{(0,r.ps)(a,(t=>{e(t)}))}))},4825:(e,t,n)=>{n.d(t,{J:()=>u});n(2791);var r=n(9434),a=n(1964),i=n(9492),o=n(5985),s=(n(5462),n(228)),c=n(7431),d=n(5642),l=n(184);const u=()=>{const e=(0,r.I0)();return(0,i.L)().then((e=>{let{notification:t}=e;o.Am.success(JSON.stringify(t))})),(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(c.h,{type:d.L$.notifications,onClick:()=>e(a.checkNotificationsPermissionCommand.action())}),(0,l.jsx)(o.Ix,{limit:5,position:"top-center",autoClose:3e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,theme:"colored"})]})}},4299:(e,t,n)=>{n.d(t,{Hb:()=>o,QH:()=>a,_j:()=>c,bd:()=>i,hT:()=>s,v3:()=>l,zo:()=>d});var r=n(305);const a=60,i=a-16,o=120,s=o+180,c="subject-description-wrapper",d=e=>(0,r.iX)(e)?s:o,l=e=>(0,r.KD)(e)?s:o},305:(e,t,n)=>{n.d(t,{IQ:()=>i,KD:()=>c,MO:()=>g,Nb:()=>h,Nh:()=>d,P6:()=>m,Uz:()=>o,VI:()=>f,bJ:()=>p,fX:()=>u,iX:()=>s,jr:()=>l});var r=n(3050),a=n(2444);const i=e=>e.modal.techerCalendarRepresentationType,o=e=>e.modal.ruleModalMode,s=e=>e.modal.subjectDescriptionShowMore,c=e=>e.modal.teacherDescriptionShowMore,d=e=>e.modal.isAbonementModalOpen,l=e=>e.modal.isNewRuleModalOpen,u=e=>e.modal.isLessonAddParticipantModalOpen,h=e=>e.modal.teacherView,p=e=>e.modal.subjectListView,m=e=>e.modal.lessonView,f=e=>e.modal.currentDate,g=e=>{switch(i(e)){case a.QW.schedule:return r.So.listWeek;case a.QW.calendarWeek:default:return r.So.timeGridWeek}}},2444:(e,t,n)=>{n.d(t,{MB:()=>s,MK:()=>l,NZ:()=>c,QW:()=>i,xF:()=>o});var r=n(6382),a=n(9901);let i=function(e){return e.schedule="schedule",e.calendarWeek="calendarWeek",e}({}),o=function(e){return e.schedule="schedule",e.subjectList="subjectList",e.subjectPage="subjectPage",e.lessonPage="lessonPage",e}({}),s=function(e){return e.subjects="subjects",e.abonements="abonements",e}({}),c=function(e){return e.accepted="accepted",e.pending="pending",e.declained="declained",e}({});const d={techerCalendarRepresentationType:i.schedule,teacherView:o.schedule,subjectListView:s.subjects,lessonView:c.accepted,isAbonementModalOpen:!1,isLessonAddParticipantModalOpen:!1,isNewRuleModalOpen:!1,ruleModalMode:a.g.halfHeight,teacherDescriptionShowMore:!1,subjectDescriptionShowMore:!1,currentDate:new Date},l=(0,r.oM)({name:"teacherModal",initialState:d,reducers:{setModalState:(e,t)=>{let{payload:n}=t;return{...e,...n}},resetModalState:()=>({...d})}})}}]);
//# sourceMappingURL=0.655175bc.chunk.js.map